{"ast":null,"code":"var _jsxFileName = \"/Users/hanguyen/Documents/git/routebuilder/src/components/SearchPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { AirportSearch } from './AirportSearch';\nimport { FlightResults } from './FlightResults';\nimport UA_miles from '../data/UA_miles.json';\nimport SQ_miles from '../data/SQ_miles.json';\nimport LH_miles from '../data/LH_miles.json';\nimport LX_miles from '../data/LX_miles.json';\nimport TG_miles from '../data/TG_miles.json';\nimport BR_miles from '../data/BR_miles.json';\nimport NH_miles from '../data/NH_miles.json';\nimport OS_miles from '../data/OS_miles.json';\nimport OZ_miles from '../data/OZ_miles.json';\nimport NZ_miles from '../data/NZ_miles.json';\nimport SA_miles from '../data/SA_miles.json';\nimport AI_miles from '../data/AI_miles.json';\nimport LO_miles from '../data/LO_miles.json';\nimport SN_miles from '../data/SN_miles.json';\nimport A3_miles from '../data/A3_miles.json';\nimport TP_miles from '../data/TP_miles.json';\nimport MS_miles from '../data/MS_miles.json';\nimport WY_miles from '../data/WY_miles.json';\nimport GF_miles from '../data/GF_miles.json';\nimport AC_miles from '../data/AC_miles.json';\nimport { airports } from '../data/airports';\nimport { getUniqueCountries } from '../utils/countryUtils';\nimport Select from 'react-select';\nimport AsyncSelect from 'react-select/async';\n\n// Co-terminal airport groups by region\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COTERMINALS = {\n  // North America co-terminals\n  'CHI': ['MDW', 'ORD'],\n  // Chicago airports\n  'DAL': ['DFW', 'DAL'],\n  // Dallas airports\n  'HOU': ['IAH', 'HOU'],\n  'NYC': ['JFK', 'LGA', 'EWR'],\n  'SFL': ['FLL', 'MIA', 'PBI'],\n  'YTO': ['YTZ', 'YHM', 'YYZ'],\n  'WAS': ['IAD', 'DCA'],\n  // South America\n  'BUE': ['AEP', 'EZE'],\n  'RIO': ['GIG', 'SDU'],\n  'SAO': ['CGH', 'GRU', 'VCP'],\n  // Europe\n  'IST': ['IST', 'SAW'],\n  'LON': ['LCY', 'LGW', 'LHR', 'LTN', 'STN'],\n  'MIL': ['BGY', 'LIN', 'MXP'],\n  'MOW': ['DME', 'SVO', 'VNO', 'ZIA'],\n  'PAR': ['CDG', 'ORY'],\n  'STO': ['ARN', 'BMA'],\n  // Asia\n  'BJS': ['PEK', 'PKX'],\n  'JKT': ['CGK', 'HLP'],\n  'OSA': ['ITM', 'KIX', 'UKB'],\n  'SPK': ['CTS', 'OKD'],\n  'SEL': ['GMP', 'ICN'],\n  'SHA': ['SHA', 'PVG'],\n  'TPE': ['TSA', 'TPE'],\n  'TYO': ['HND', 'NRT']\n};\n\n// Helper function to find which co-terminal group an airport belongs to\nfunction getCoTerminalGroup(airport) {\n  for (const [group, airports] of Object.entries(COTERMINALS)) {\n    if (airports.includes(airport)) {\n      return group;\n    }\n  }\n  return null;\n}\n\n// Validates that a route doesn't use multiple airports from the same co-terminal group\nfunction isValidCoTerminalRoute(newSegment, existingPath) {\n  // Collect all airports in the route including the new segment\n  const allAirports = [...existingPath.map(seg => seg.Departure_IATA), ...existingPath.map(seg => seg.Arrival_IATA), newSegment[\"Departure IATA\"], newSegment[\"Arrival IATA\"]];\n\n  // Track which airport is used for each co-terminal group\n  const usedCoTerminals = new Map();\n  for (const airport of allAirports) {\n    const coTerminalGroup = getCoTerminalGroup(airport);\n    if (coTerminalGroup) {\n      if (usedCoTerminals.has(coTerminalGroup)) {\n        // Reject if trying to use a different airport from same co-terminal group\n        if (usedCoTerminals.get(coTerminalGroup) !== airport) {\n          return false;\n        }\n      } else {\n        usedCoTerminals.set(coTerminalGroup, airport);\n      }\n    }\n  }\n  return true;\n}\n\n// Constants for region restrictions\nconst EUROPEAN_COUNTRIES = new Set(['Germany', 'United Kingdom', 'France', 'Italy', 'Spain', 'Poland', 'Ukraine', 'Romania', 'Netherlands', 'Belgium', 'Czechia', 'Sweden', 'Portugal', 'Greece', 'Hungary', 'Austria', 'Belarus', 'Switzerland', 'Bulgaria', 'Serbia', 'Denmark', 'Finland', 'Norway', 'Slovakia', 'Ireland', 'Croatia', 'Bosnia And Herzegovina', 'Moldova', 'Lithuania', 'Albania', 'Slovenia', 'Latvia', 'North Macedonia', 'Estonia', 'Luxembourg', 'Montenegro', 'Malta', 'Iceland']);\n\n// First, let's create a helper function to check if a route avoids certain countries\nconst isRouteAvoidingCountries = (route, avoidCountries) => {\n  // Check each airport in the route\n  for (const segment of route) {\n    const departureAirport = airports.find(a => a.IATA === segment.Departure_IATA);\n    const arrivalAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n\n    // If any airport in the route is in an avoided country, return false\n    if (departureAirport && avoidCountries.includes(departureAirport.Country)) {\n      return false;\n    }\n    if (arrivalAirport && avoidCountries.includes(arrivalAirport.Country)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n// Create airlines list from your JSON imports\nconst airlines = [{\n  value: 'A3',\n  label: 'Aegean Airlines (A3)'\n}, {\n  value: 'AC',\n  label: 'Air Canada (AC)'\n}, {\n  value: 'AI',\n  label: 'Air India (AI)'\n}, {\n  value: 'NZ',\n  label: 'Air New Zealand (NZ)'\n}, {\n  value: 'NH',\n  label: 'All Nippon Airways (NH)'\n}, {\n  value: 'OZ',\n  label: 'Asiana Airlines (OZ)'\n}, {\n  value: 'OS',\n  label: 'Austrian Airlines (OS)'\n}, {\n  value: 'SN',\n  label: 'Brussels Airlines (SN)'\n}, {\n  value: 'MS',\n  label: 'EgyptAir (MS)'\n}, {\n  value: 'BR',\n  label: 'EVA Air (BR)'\n}, {\n  value: 'GF',\n  label: 'Gulf Air (GF)'\n}, {\n  value: 'LO',\n  label: 'LOT Polish Airlines (LO)'\n}, {\n  value: 'LH',\n  label: 'Lufthansa (LH)'\n}, {\n  value: 'WY',\n  label: 'Oman Air (WY)'\n}, {\n  value: 'SQ',\n  label: 'Singapore Airlines (SQ)'\n}, {\n  value: 'SA',\n  label: 'South African Airways (SA)'\n}, {\n  value: 'LX',\n  label: 'Swiss International Air Lines (LX)'\n}, {\n  value: 'TP',\n  label: 'TAP Air Portugal (TP)'\n}, {\n  value: 'TG',\n  label: 'Thai Airways (TG)'\n}, {\n  value: 'UA',\n  label: 'United Airlines (UA)'\n}].sort((a, b) => a.label.localeCompare(b.label));\n\n// Helper function to calculate distance between two points using Haversine formula\nconst calculateDistance = (lat1, lon1, lat2, lon2) => {\n  const R = 6371; // Earth's radius in kilometers\n  const dLat = (lat2 - lat1) * Math.PI / 180;\n  const dLon = (lon2 - lon1) * Math.PI / 180;\n  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n};\n\n// Calculate total distance for a route\nconst calculateRouteDistance = route => {\n  let totalDistance = 0;\n  for (let i = 0; i < route.length; i++) {\n    const segment = route[i];\n    const departureAirport = airports.find(a => a.IATA === segment.Departure_IATA);\n    const arrivalAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n    if (departureAirport && arrivalAirport) {\n      const segmentDistance = calculateDistance(departureAirport.Latitude, departureAirport.Longitude, arrivalAirport.Latitude, arrivalAirport.Longitude);\n      totalDistance += segmentDistance;\n    }\n  }\n  return totalDistance;\n};\nexport function SearchPage() {\n  _s();\n  var _airports$find6, _airports$find7, _airports$find8, _airports$find9, _airports$find10, _airports$find11;\n  // State for selected airports and search results\n  const [departureAirport, setDepartureAirport] = useState('');\n  const [arrivalAirport, setArrivalAirport] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [showResults, setShowResults] = useState(false);\n  const [avoidCountries, setAvoidCountries] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [avoidAirlines, setAvoidAirlines] = useState([]);\n\n  // Get the country options when component mounts\n  const countryOptions = useMemo(() => {\n    return getUniqueCountries(airports);\n  }, []);\n\n  // Calculates direct distance between airports using Haversine formula\n  function calculateDirectDistance(origin, destination) {\n    const originAirport = airports.find(a => a.IATA === origin);\n    const destAirport = airports.find(a => a.IATA === destination);\n    if (!originAirport || !destAirport) return null;\n    const R = 3959; // Earth's radius in miles\n    const lat1 = originAirport.Latitude * Math.PI / 180;\n    const lat2 = destAirport.Latitude * Math.PI / 180;\n    const dLat = (destAirport.Latitude - originAirport.Latitude) * Math.PI / 180;\n    const dLon = (destAirport.Longitude - originAirport.Longitude) * Math.PI / 180;\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1) * Math.cos(lat2) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  // Main route finding function with Aeroplan routing rules\n  const findPossibleRoutes = (origin, destination, visited = new Set(), visitedCountries = new Set(), path = [], directDistance = null) => {\n    // Filter routes based on avoided airlines\n    const allRoutes = [...(avoidAirlines.includes('UA') ? [] : UA_miles), ...(avoidAirlines.includes('SQ') ? [] : SQ_miles), ...(avoidAirlines.includes('LH') ? [] : LH_miles), ...(avoidAirlines.includes('LX') ? [] : LX_miles), ...(avoidAirlines.includes('TG') ? [] : TG_miles), ...(avoidAirlines.includes('BR') ? [] : BR_miles), ...(avoidAirlines.includes('NH') ? [] : NH_miles), ...(avoidAirlines.includes('OS') ? [] : OS_miles), ...(avoidAirlines.includes('OZ') ? [] : OZ_miles), ...(avoidAirlines.includes('NZ') ? [] : NZ_miles), ...(avoidAirlines.includes('SA') ? [] : SA_miles), ...(avoidAirlines.includes('AI') ? [] : AI_miles), ...(avoidAirlines.includes('LO') ? [] : LO_miles), ...(avoidAirlines.includes('SN') ? [] : SN_miles), ...(avoidAirlines.includes('A3') ? [] : A3_miles), ...(avoidAirlines.includes('TP') ? [] : TP_miles), ...(avoidAirlines.includes('MS') ? [] : MS_miles), ...(avoidAirlines.includes('WY') ? [] : WY_miles), ...(avoidAirlines.includes('GF') ? [] : GF_miles), ...(avoidAirlines.includes('AC') ? [] : AC_miles)];\n    const routes = [];\n\n    // Get origin/destination details for zone and region checks\n    const originAirport = airports.find(a => a.IATA === origin);\n    const destAirport = airports.find(a => a.IATA === destination);\n    const isOriginNorthAmerica = ['United States', 'Canada'].includes(originAirport === null || originAirport === void 0 ? void 0 : originAirport.Country);\n    const isDestNorthAmerica = ['United States', 'Canada'].includes(destAirport === null || destAirport === void 0 ? void 0 : destAirport.Country);\n    const bothInNorthAmerica = isOriginNorthAmerica && isDestNorthAmerica;\n\n    // Track layover counts for routing rules\n    const northAmericaLayovers = path.reduce((count, segment) => {\n      const layoverAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n      return count + (['United States', 'Canada'].includes(layoverAirport === null || layoverAirport === void 0 ? void 0 : layoverAirport.Country) ? 1 : 0);\n    }, 0);\n\n    // Count existing European layovers in the current path\n    const europeanLayovers = path.reduce((count, segment) => {\n      const layoverAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n      return count + (EUROPEAN_COUNTRIES.has(layoverAirport === null || layoverAirport === void 0 ? void 0 : layoverAirport.Country) ? 1 : 0);\n    }, 0);\n\n    // Calculate direct distance if not provided\n    if (directDistance === null) {\n      directDistance = calculateDirectDistance(origin, destination);\n      if (!directDistance) return [];\n    }\n\n    // Base case: if we've found a path to the destination\n    if (path.length > 0 && path[path.length - 1].Arrival_IATA === destination) {\n      const totalDistance = path.reduce((sum, segment) => sum + segment.Distance, 0);\n      if (totalDistance <= directDistance * 2) {\n        return [path];\n      }\n      return [];\n    }\n\n    // Don't allow paths longer than 6 segments (5 stops)\n    if (path.length >= 4) {\n      return [];\n    }\n\n    // Get current point and its country\n    const currentPoint = path.length === 0 ? origin : path[path.length - 1].Arrival_IATA;\n    const currentAirport = airports.find(a => a.IATA === currentPoint);\n    if (!currentAirport) return [];\n\n    // Add helper function to count layovers by country\n    const getLayoverCountByCountry = currentPath => {\n      const countByCountry = {};\n      currentPath.forEach(segment => {\n        const airport = airports.find(a => a.IATA === segment.Arrival_IATA);\n        if (airport) {\n          countByCountry[airport.Country] = (countByCountry[airport.Country] || 0) + 1;\n        }\n      });\n      return countByCountry;\n    };\n    const possibleSegments = allRoutes.filter(route => {\n      var _airports$find, _airports$find2, _airports$find3;\n      if (route[\"Departure IATA\"] !== currentPoint) return false;\n\n      // Get origin and destination countries\n      const originAirport = airports.find(a => a.IATA === origin);\n      const destAirport = airports.find(a => a.IATA === destination);\n      const thisArrivalAirport = airports.find(a => a.IATA === route[\"Arrival IATA\"]);\n      if (!originAirport || !destAirport || !thisArrivalAirport) return false;\n\n      // Check for multiple layovers in same country\n      const layoverCounts = getLayoverCountByCountry(path);\n      const arrivalCountry = thisArrivalAirport.Country;\n\n      // Allow multiple stops only if it's origin or destination country\n      if (arrivalCountry !== originAirport.Country && arrivalCountry !== destAirport.Country && layoverCounts[arrivalCountry] >= 1) {\n        return false;\n      }\n\n      // Get zones\n      const originZone = (_airports$find = airports.find(a => a.IATA === origin)) === null || _airports$find === void 0 ? void 0 : _airports$find.Zone;\n      const destZone = (_airports$find2 = airports.find(a => a.IATA === destination)) === null || _airports$find2 === void 0 ? void 0 : _airports$find2.Zone;\n      const arrivalZone = (_airports$find3 = airports.find(a => a.IATA === route[\"Arrival IATA\"])) === null || _airports$find3 === void 0 ? void 0 : _airports$find3.Zone;\n\n      // If origin and destination are in same zone, prevent connections through different zones\n      if (originZone === destZone && arrivalZone !== originZone) {\n        return false;\n      }\n\n      // Add co-terminal validation\n      if (!isValidCoTerminalRoute(route, path)) {\n        return false;\n      }\n\n      // Get the arrival airport details\n      const arrivalAirport = airports.find(a => a.IATA === route[\"Arrival IATA\"]);\n      if (!arrivalAirport) return false;\n\n      // Check if adding this segment would exceed US/Canada layover limit\n      const isArrivalNorthAmerica = ['United States', 'Canada'].includes(arrivalAirport.Country);\n      if (isArrivalNorthAmerica && !bothInNorthAmerica && northAmericaLayovers >= 2) {\n        return false;\n      }\n\n      // Check if adding this segment would exceed European layover limit\n      const isEuropeanArrival = EUROPEAN_COUNTRIES.has(arrivalAirport.Country);\n      if (isEuropeanArrival && europeanLayovers >= 2) {\n        return false;\n      }\n\n      // Check if we're not backtracking to a visited airport\n      if (visited.has(route[\"Arrival IATA\"])) return false;\n\n      // Check if we're not backtracking to a visited country\n      // Exception: Allow same country connection if it's a direct continuation\n      const isBacktrackingCountry = visitedCountries.has(arrivalAirport.Country) && arrivalAirport.Country !== currentAirport.Country;\n      if (isBacktrackingCountry) return false;\n      return true;\n    });\n\n    // Try each possible next segment\n    for (const segment of possibleSegments) {\n      const arrivalAirport = airports.find(a => a.IATA === segment[\"Arrival IATA\"]);\n\n      // Calculate running total distance\n      const currentTotalDistance = path.reduce((sum, seg) => sum + seg.Distance, 0) + segment[\"Flight Distance (miles)\"];\n\n      // Skip this path if it's already over 2x direct distance\n      if (currentTotalDistance > directDistance * 2) {\n        continue;\n      }\n\n      // Update visited sets\n      const newVisited = new Set(visited);\n      newVisited.add(segment[\"Arrival IATA\"]);\n      const newVisitedCountries = new Set(visitedCountries);\n      newVisitedCountries.add(arrivalAirport.Country);\n      const newPath = [...path, {\n        Departure_IATA: segment[\"Departure IATA\"],\n        Arrival_IATA: segment[\"Arrival IATA\"],\n        Distance: segment[\"Flight Distance (miles)\"],\n        Country: arrivalAirport.Country // Add country info for reference\n      }];\n      const newRoutes = findPossibleRoutes(origin, destination, newVisited, newVisitedCountries, newPath, directDistance);\n      routes.push(...newRoutes);\n    }\n    return routes;\n  };\n\n  // Handles the search button click\n  // Updates URL parameters and finds possible routes\n  const handleSearch = async () => {\n    // Show loading overlay immediately\n    setIsLoading(true);\n    setShowResults(false);\n    try {\n      // Wait for 250ms to ensure overlay is visible\n      await new Promise(resolve => setTimeout(resolve, 250));\n      if (departureAirport && arrivalAirport) {\n        const params = new URLSearchParams();\n        params.set('from', departureAirport);\n        params.set('to', arrivalAirport);\n        params.set('avoidCountries', avoidCountries.join(','));\n        window.history.pushState({}, '', `${window.location.pathname}?${params.toString()}`);\n        const originAirport = airports.find(a => a.IATA === departureAirport);\n        const visited = new Set([departureAirport]);\n        const visitedCountries = new Set([originAirport.Country]);\n        const routes = findPossibleRoutes(departureAirport, arrivalAirport, visited, visitedCountries);\n\n        // Filter out routes that go through avoided countries\n        const filteredRoutes = routes.filter(route => isRouteAvoidingCountries(route, avoidCountries));\n\n        // Sort routes by total distance\n        const sortedRoutes = filteredRoutes.sort((a, b) => {\n          const distanceA = calculateRouteDistance(a);\n          const distanceB = calculateRouteDistance(b);\n          return distanceA - distanceB; // Low to high\n        });\n        setSearchResults(sortedRoutes);\n        setShowResults(true);\n      }\n    } catch (error) {\n      console.error('Error searching routes:', error);\n    } finally {\n      // Add a small delay before hiding loading screen for smoother transition\n      await new Promise(resolve => setTimeout(resolve, 100));\n      setIsLoading(false);\n    }\n  };\n\n  // Airport search with better IATA and name prioritization\n  const getAirportOptions = inputValue => {\n    if (!inputValue) return [];\n    const input = inputValue.toLowerCase().trim();\n\n    // Priority 1: Exact IATA match\n    const exactIataMatches = airports.filter(airport => airport.IATA.toLowerCase() === input);\n\n    // Priority 2: IATA starts with input\n    const startingIataMatches = airports.filter(airport => airport.IATA.toLowerCase().startsWith(input) && !exactIataMatches.includes(airport));\n\n    // Priority 3: Airport name starts with input\n    const startingNameMatches = airports.filter(airport => airport.Name.toLowerCase().startsWith(input) && !exactIataMatches.includes(airport) && !startingIataMatches.includes(airport));\n\n    // Priority 4: Airport name contains input\n    const containingNameMatches = airports.filter(airport => airport.Name.toLowerCase().includes(input) && !exactIataMatches.includes(airport) && !startingIataMatches.includes(airport) && !startingNameMatches.includes(airport));\n\n    // Combine all matches with proper ordering\n    const allMatches = [...exactIataMatches, ...startingIataMatches, ...startingNameMatches, ...containingNameMatches].slice(0, 5); // Limit to 5 results\n\n    return allMatches.map(airport => ({\n      value: airport.IATA,\n      label: `${airport.IATA} - ${airport.Name} (${airport.Country})`\n    }));\n  };\n\n  // Country search with progressive character matching\n  const getCountryOptions = inputValue => {\n    if (!inputValue) return [];\n    const input = inputValue.toLowerCase().trim();\n    const countries = getUniqueCountries(airports);\n\n    // First: Exact matches\n    const exactMatches = countries.filter(country => country.toLowerCase() === input);\n\n    // Second: Starting matches (progressive matching)\n    const startingMatches = countries.filter(country => country.toLowerCase().startsWith(input) && !exactMatches.includes(country));\n\n    // Third: Progressive character matching\n    const progressiveMatches = countries.filter(country => {\n      if (exactMatches.includes(country) || startingMatches.includes(country)) {\n        return false;\n      }\n      const countryChars = country.toLowerCase();\n      let lastIndex = -1;\n\n      // Check if characters appear in sequence\n      for (const char of input) {\n        const index = countryChars.indexOf(char, lastIndex + 1);\n        if (index === -1) return false;\n        lastIndex = index;\n      }\n      return true;\n    });\n\n    // Combine all matches with proper ordering\n    const allMatches = [...exactMatches, ...startingMatches, ...progressiveMatches].slice(0, 5); // Limit to 5 results\n\n    return allMatches.map(country => ({\n      value: country,\n      label: country\n    }));\n  };\n  const filterCountries = inputValue => {\n    if (!inputValue) return [];\n    const input = inputValue.toLowerCase().trim();\n    const countries = getUniqueCountries(airports);\n\n    // Priority 1: Exact matches\n    const exactMatches = countries.filter(country => country.toLowerCase() === input);\n\n    // Priority 2: Starts with input\n    const startingMatches = countries.filter(country => country.toLowerCase().startsWith(input) && !exactMatches.includes(country));\n\n    // Priority 3: Contains input\n    const containingMatches = countries.filter(country => country.toLowerCase().includes(input) && !exactMatches.includes(country) && !startingMatches.includes(country));\n    return [...exactMatches, ...startingMatches, ...containingMatches].slice(0, 5).map(country => ({\n      value: country,\n      label: country\n    }));\n  };\n  const loadCountryOptions = inputValue => new Promise(resolve => {\n    resolve(filterCountries(inputValue));\n  });\n  const filterAirports = inputValue => {\n    if (!inputValue) return [];\n    const input = inputValue.toLowerCase().trim();\n\n    // Filter out airports from avoided countries first\n    const availableAirports = airports.filter(airport => !avoidCountries.includes(airport.Country));\n\n    // Priority 1: Exact IATA match\n    const exactIataMatches = availableAirports.filter(airport => airport.IATA.toLowerCase() === input);\n\n    // Priority 2: IATA starts with input\n    const startingIataMatches = availableAirports.filter(airport => airport.IATA.toLowerCase().startsWith(input) && !exactIataMatches.includes(airport));\n\n    // Priority 3: Airport name starts with input\n    const startingNameMatches = availableAirports.filter(airport => airport.Name.toLowerCase().startsWith(input) && !exactIataMatches.includes(airport) && !startingIataMatches.includes(airport));\n\n    // Priority 4: Airport name contains input\n    const containingNameMatches = availableAirports.filter(airport => airport.Name.toLowerCase().includes(input) && !exactIataMatches.includes(airport) && !startingIataMatches.includes(airport) && !startingNameMatches.includes(airport));\n\n    // Combine all matches with proper ordering\n    const allMatches = [...exactIataMatches, ...startingIataMatches, ...startingNameMatches, ...containingNameMatches].slice(0, 5); // Limit to 5 results\n\n    return allMatches.map(airport => ({\n      value: airport.IATA,\n      label: `${airport.IATA} - ${airport.Name} (${airport.Country})`\n    }));\n  };\n  const loadAirportOptions = inputValue => new Promise(resolve => {\n    resolve(filterAirports(inputValue));\n  });\n\n  // Filter airlines function\n  const filterAirlines = inputValue => {\n    if (!inputValue) return airlines;\n    const input = inputValue.toLowerCase().trim();\n\n    // Priority 1: Exact airline code match\n    const exactCodeMatches = airlines.filter(airline => airline.value.toLowerCase() === input);\n\n    // Priority 2: Starting airline code match\n    const startingCodeMatches = airlines.filter(airline => airline.value.toLowerCase().startsWith(input) && !exactCodeMatches.includes(airline));\n\n    // Priority 3: Airline name contains input\n    const nameMatches = airlines.filter(airline => airline.label.toLowerCase().includes(input) && !exactCodeMatches.includes(airline) && !startingCodeMatches.includes(airline));\n    return [...exactCodeMatches, ...startingCodeMatches, ...nameMatches];\n  };\n  const loadAirlineOptions = inputValue => new Promise(resolve => {\n    resolve(filterAirlines(inputValue));\n  });\n\n  // Also clear selected airports if their country is now avoided\n  useEffect(() => {\n    if (departureAirport) {\n      var _airports$find4;\n      const departureCountry = (_airports$find4 = airports.find(a => a.IATA === departureAirport)) === null || _airports$find4 === void 0 ? void 0 : _airports$find4.Country;\n      if (departureCountry && avoidCountries.includes(departureCountry)) {\n        setDepartureAirport('');\n      }\n    }\n    if (arrivalAirport) {\n      var _airports$find5;\n      const arrivalCountry = (_airports$find5 = airports.find(a => a.IATA === arrivalAirport)) === null || _airports$find5 === void 0 ? void 0 : _airports$find5.Country;\n      if (arrivalCountry && avoidCountries.includes(arrivalCountry)) {\n        setArrivalAirport('');\n      }\n    }\n  }, [avoidCountries, departureAirport, arrivalAirport]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-boxes\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"airport-search\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-parameter departure-parameter\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              fontWeight: 700\n            },\n            children: \"Departure Airport:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 719,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AsyncSelect, {\n            className: \"select-input\",\n            cacheOptions: true,\n            defaultOptions: true,\n            value: departureAirport ? {\n              value: departureAirport,\n              label: ((_airports$find6 = airports.find(a => a.IATA === departureAirport)) === null || _airports$find6 === void 0 ? void 0 : _airports$find6.IATA) + \" - \" + ((_airports$find7 = airports.find(a => a.IATA === departureAirport)) === null || _airports$find7 === void 0 ? void 0 : _airports$find7.Name) + \" (\" + ((_airports$find8 = airports.find(a => a.IATA === departureAirport)) === null || _airports$find8 === void 0 ? void 0 : _airports$find8.Country) + \")\"\n            } : null,\n            loadOptions: loadAirportOptions,\n            onChange: selected => setDepartureAirport(selected ? selected.value : ''),\n            isDisabled: isLoading,\n            placeholder: \"Type to search airports...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-parameter arrival-parameter\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              fontWeight: 700\n            },\n            children: \"Arrival Airport:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 737,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AsyncSelect, {\n            className: \"select-input\",\n            cacheOptions: true,\n            defaultOptions: true,\n            value: arrivalAirport ? {\n              value: arrivalAirport,\n              label: ((_airports$find9 = airports.find(a => a.IATA === arrivalAirport)) === null || _airports$find9 === void 0 ? void 0 : _airports$find9.IATA) + \" - \" + ((_airports$find10 = airports.find(a => a.IATA === arrivalAirport)) === null || _airports$find10 === void 0 ? void 0 : _airports$find10.Name) + \" (\" + ((_airports$find11 = airports.find(a => a.IATA === arrivalAirport)) === null || _airports$find11 === void 0 ? void 0 : _airports$find11.Country) + \")\"\n            } : null,\n            loadOptions: loadAirportOptions,\n            onChange: selected => setArrivalAirport(selected ? selected.value : ''),\n            isDisabled: isLoading,\n            placeholder: \"Type to search airports...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 738,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 736,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 717,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-parameter\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Avoid Countries:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 756,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AsyncSelect, {\n          isMulti: true,\n          className: \"select-input avoid-countries-select\",\n          cacheOptions: true,\n          defaultOptions: true,\n          value: avoidCountries.map(country => ({\n            value: country,\n            label: country\n          })),\n          loadOptions: loadCountryOptions,\n          onChange: selected => {\n            setAvoidCountries(selected ? selected.map(option => option.value) : []);\n          },\n          isDisabled: isLoading,\n          placeholder: \"Type to search countries...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 757,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-parameter\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Avoid Airlines:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 775,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AsyncSelect, {\n          isMulti: true,\n          className: \"select-input avoid-airlines-select\",\n          cacheOptions: true,\n          defaultOptions: airlines,\n          value: avoidAirlines.map(airline => {\n            var _airlines$find;\n            return {\n              value: airline,\n              label: ((_airlines$find = airlines.find(a => a.value === airline)) === null || _airlines$find === void 0 ? void 0 : _airlines$find.label) || airline\n            };\n          }),\n          loadOptions: loadAirlineOptions,\n          onChange: selected => {\n            setAvoidAirlines(selected ? selected.map(option => option.value) : []);\n          },\n          isDisabled: isLoading,\n          placeholder: \"Select airlines to avoid...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 776,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 774,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"search-button\",\n        onClick: handleSearch,\n        disabled: isLoading || !departureAirport || !arrivalAirport,\n        children: isLoading ? 'Searching...' : 'Search'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 793,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 716,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FlightResults, {\n      results: searchResults,\n      isVisible: showResults\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 801,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 808,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-text\",\n        children: \"Searching for routes...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 809,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 807,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 715,\n    columnNumber: 5\n  }, this);\n}\n_s(SearchPage, \"GoCqF8MviSOVuyJkfAFSeg2vp3Q=\");\n_c = SearchPage;\nvar _c;\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","AirportSearch","FlightResults","UA_miles","SQ_miles","LH_miles","LX_miles","TG_miles","BR_miles","NH_miles","OS_miles","OZ_miles","NZ_miles","SA_miles","AI_miles","LO_miles","SN_miles","A3_miles","TP_miles","MS_miles","WY_miles","GF_miles","AC_miles","airports","getUniqueCountries","Select","AsyncSelect","jsxDEV","_jsxDEV","COTERMINALS","getCoTerminalGroup","airport","group","Object","entries","includes","isValidCoTerminalRoute","newSegment","existingPath","allAirports","map","seg","Departure_IATA","Arrival_IATA","usedCoTerminals","Map","coTerminalGroup","has","get","set","EUROPEAN_COUNTRIES","Set","isRouteAvoidingCountries","route","avoidCountries","segment","departureAirport","find","a","IATA","arrivalAirport","Country","airlines","value","label","sort","b","localeCompare","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","Math","PI","dLon","sin","cos","c","atan2","sqrt","calculateRouteDistance","totalDistance","i","length","segmentDistance","Latitude","Longitude","SearchPage","_s","_airports$find6","_airports$find7","_airports$find8","_airports$find9","_airports$find10","_airports$find11","setDepartureAirport","setArrivalAirport","searchResults","setSearchResults","showResults","setShowResults","setAvoidCountries","isLoading","setIsLoading","avoidAirlines","setAvoidAirlines","countryOptions","calculateDirectDistance","origin","destination","originAirport","destAirport","findPossibleRoutes","visited","visitedCountries","path","directDistance","allRoutes","routes","isOriginNorthAmerica","isDestNorthAmerica","bothInNorthAmerica","northAmericaLayovers","reduce","count","layoverAirport","europeanLayovers","sum","Distance","currentPoint","currentAirport","getLayoverCountByCountry","currentPath","countByCountry","forEach","possibleSegments","filter","_airports$find","_airports$find2","_airports$find3","thisArrivalAirport","layoverCounts","arrivalCountry","originZone","Zone","destZone","arrivalZone","isArrivalNorthAmerica","isEuropeanArrival","isBacktrackingCountry","currentTotalDistance","newVisited","add","newVisitedCountries","newPath","newRoutes","push","handleSearch","Promise","resolve","setTimeout","params","URLSearchParams","join","window","history","pushState","location","pathname","toString","filteredRoutes","sortedRoutes","distanceA","distanceB","error","console","getAirportOptions","inputValue","input","toLowerCase","trim","exactIataMatches","startingIataMatches","startsWith","startingNameMatches","Name","containingNameMatches","allMatches","slice","getCountryOptions","countries","exactMatches","country","startingMatches","progressiveMatches","countryChars","lastIndex","char","index","indexOf","filterCountries","containingMatches","loadCountryOptions","filterAirports","availableAirports","loadAirportOptions","filterAirlines","exactCodeMatches","airline","startingCodeMatches","nameMatches","loadAirlineOptions","_airports$find4","departureCountry","_airports$find5","className","children","style","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","cacheOptions","defaultOptions","loadOptions","onChange","selected","isDisabled","placeholder","isMulti","option","_airlines$find","onClick","disabled","results","isVisible","_c","$RefreshReg$"],"sources":["/Users/hanguyen/Documents/git/routebuilder/src/components/SearchPage.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { AirportSearch } from './AirportSearch';\nimport { FlightResults } from './FlightResults';\nimport UA_miles from '../data/UA_miles.json';\nimport SQ_miles from '../data/SQ_miles.json';\nimport LH_miles from '../data/LH_miles.json';\nimport LX_miles from '../data/LX_miles.json';\nimport TG_miles from '../data/TG_miles.json';\nimport BR_miles from '../data/BR_miles.json';\nimport NH_miles from '../data/NH_miles.json';\nimport OS_miles from '../data/OS_miles.json';\nimport OZ_miles from '../data/OZ_miles.json';\nimport NZ_miles from '../data/NZ_miles.json';   \nimport SA_miles from '../data/SA_miles.json';\nimport AI_miles from '../data/AI_miles.json';\nimport LO_miles from '../data/LO_miles.json';\nimport SN_miles from '../data/SN_miles.json'; \nimport A3_miles from '../data/A3_miles.json';\nimport TP_miles from '../data/TP_miles.json';\nimport MS_miles from '../data/MS_miles.json';\nimport WY_miles from '../data/WY_miles.json';\nimport GF_miles from '../data/GF_miles.json';\nimport AC_miles from '../data/AC_miles.json';\nimport { airports } from '../data/airports';\nimport { getUniqueCountries } from '../utils/countryUtils';\nimport Select from 'react-select';\nimport AsyncSelect from 'react-select/async';\n\n// Co-terminal airport groups by region\nconst COTERMINALS = {\n  // North America co-terminals\n  'CHI': ['MDW', 'ORD'],  // Chicago airports\n  'DAL': ['DFW', 'DAL'],  // Dallas airports\n  'HOU': ['IAH', 'HOU'],\n  'NYC': ['JFK', 'LGA', 'EWR'],\n  'SFL': ['FLL', 'MIA', 'PBI'],\n  'YTO': ['YTZ', 'YHM', 'YYZ'],\n  'WAS': ['IAD', 'DCA'],\n  \n  // South America\n  'BUE': ['AEP', 'EZE'],\n  'RIO': ['GIG', 'SDU'],\n  'SAO': ['CGH', 'GRU', 'VCP'],\n  \n  // Europe\n  'IST': ['IST', 'SAW'],\n  'LON': ['LCY', 'LGW', 'LHR', 'LTN', 'STN'],\n  'MIL': ['BGY', 'LIN', 'MXP'],\n  'MOW': ['DME', 'SVO', 'VNO', 'ZIA'],\n  'PAR': ['CDG', 'ORY'],\n  'STO': ['ARN', 'BMA'],\n  \n  // Asia\n  'BJS': ['PEK', 'PKX'],\n  'JKT': ['CGK', 'HLP'],\n  'OSA': ['ITM', 'KIX', 'UKB'],\n  'SPK': ['CTS', 'OKD'],\n  'SEL': ['GMP', 'ICN'],\n  'SHA': ['SHA', 'PVG'],\n  'TPE': ['TSA', 'TPE'],\n  'TYO': ['HND', 'NRT']\n};\n\n// Helper function to find which co-terminal group an airport belongs to\nfunction getCoTerminalGroup(airport) {\n  for (const [group, airports] of Object.entries(COTERMINALS)) {\n    if (airports.includes(airport)) {\n      return group;\n    }\n  }\n  return null;\n}\n\n// Validates that a route doesn't use multiple airports from the same co-terminal group\nfunction isValidCoTerminalRoute(newSegment, existingPath) {\n  // Collect all airports in the route including the new segment\n  const allAirports = [\n    ...existingPath.map(seg => seg.Departure_IATA),\n    ...existingPath.map(seg => seg.Arrival_IATA),\n    newSegment[\"Departure IATA\"],\n    newSegment[\"Arrival IATA\"]\n  ];\n  \n  // Track which airport is used for each co-terminal group\n  const usedCoTerminals = new Map();\n  \n  for (const airport of allAirports) {\n    const coTerminalGroup = getCoTerminalGroup(airport);\n    if (coTerminalGroup) {\n      if (usedCoTerminals.has(coTerminalGroup)) {\n        // Reject if trying to use a different airport from same co-terminal group\n        if (usedCoTerminals.get(coTerminalGroup) !== airport) {\n          return false;\n        }\n      } else {\n        usedCoTerminals.set(coTerminalGroup, airport);\n      }\n    }\n  }\n  \n  return true;\n}\n\n// Constants for region restrictions\nconst EUROPEAN_COUNTRIES = new Set([\n  'Germany', 'United Kingdom', 'France', 'Italy', 'Spain', 'Poland', 'Ukraine', \n  'Romania', 'Netherlands', 'Belgium', 'Czechia', 'Sweden', 'Portugal', 'Greece',\n  'Hungary', 'Austria', 'Belarus', 'Switzerland', 'Bulgaria', 'Serbia', 'Denmark',\n  'Finland', 'Norway', 'Slovakia', 'Ireland', 'Croatia', 'Bosnia And Herzegovina',\n  'Moldova', 'Lithuania', 'Albania', 'Slovenia', 'Latvia', 'North Macedonia',\n  'Estonia', 'Luxembourg', 'Montenegro', 'Malta', 'Iceland'\n]);\n\n// First, let's create a helper function to check if a route avoids certain countries\nconst isRouteAvoidingCountries = (route, avoidCountries) => {\n  // Check each airport in the route\n  for (const segment of route) {\n    const departureAirport = airports.find(a => a.IATA === segment.Departure_IATA);\n    const arrivalAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n    \n    // If any airport in the route is in an avoided country, return false\n    if (departureAirport && avoidCountries.includes(departureAirport.Country)) {\n      return false;\n    }\n    if (arrivalAirport && avoidCountries.includes(arrivalAirport.Country)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n// Create airlines list from your JSON imports\nconst airlines = [\n  { value: 'A3', label: 'Aegean Airlines (A3)' },\n  { value: 'AC', label: 'Air Canada (AC)' },\n  { value: 'AI', label: 'Air India (AI)' },\n  { value: 'NZ', label: 'Air New Zealand (NZ)' },\n  { value: 'NH', label: 'All Nippon Airways (NH)' },\n  { value: 'OZ', label: 'Asiana Airlines (OZ)' },\n  { value: 'OS', label: 'Austrian Airlines (OS)' },\n  { value: 'SN', label: 'Brussels Airlines (SN)' },\n  { value: 'MS', label: 'EgyptAir (MS)' },\n  { value: 'BR', label: 'EVA Air (BR)' },\n  { value: 'GF', label: 'Gulf Air (GF)' },\n  { value: 'LO', label: 'LOT Polish Airlines (LO)' },\n  { value: 'LH', label: 'Lufthansa (LH)' },\n  { value: 'WY', label: 'Oman Air (WY)' },\n  { value: 'SQ', label: 'Singapore Airlines (SQ)' },\n  { value: 'SA', label: 'South African Airways (SA)' },\n  { value: 'LX', label: 'Swiss International Air Lines (LX)' },\n  { value: 'TP', label: 'TAP Air Portugal (TP)' },\n  { value: 'TG', label: 'Thai Airways (TG)' },\n  { value: 'UA', label: 'United Airlines (UA)' }\n].sort((a, b) => a.label.localeCompare(b.label));\n\n// Helper function to calculate distance between two points using Haversine formula\nconst calculateDistance = (lat1, lon1, lat2, lon2) => {\n  const R = 6371; // Earth's radius in kilometers\n  const dLat = (lat2 - lat1) * Math.PI / 180;\n  const dLon = (lon2 - lon1) * Math.PI / 180;\n  const a = \n    Math.sin(dLat/2) * Math.sin(dLat/2) +\n    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * \n    Math.sin(dLon/2) * Math.sin(dLon/2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n  return R * c;\n};\n\n// Calculate total distance for a route\nconst calculateRouteDistance = (route) => {\n  let totalDistance = 0;\n  \n  for (let i = 0; i < route.length; i++) {\n    const segment = route[i];\n    const departureAirport = airports.find(a => a.IATA === segment.Departure_IATA);\n    const arrivalAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n    \n    if (departureAirport && arrivalAirport) {\n      const segmentDistance = calculateDistance(\n        departureAirport.Latitude,\n        departureAirport.Longitude,\n        arrivalAirport.Latitude,\n        arrivalAirport.Longitude\n      );\n      totalDistance += segmentDistance;\n    }\n  }\n  \n  return totalDistance;\n};\n\nexport function SearchPage() {\n  // State for selected airports and search results\n  const [departureAirport, setDepartureAirport] = useState('');\n  const [arrivalAirport, setArrivalAirport] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [showResults, setShowResults] = useState(false);\n  const [avoidCountries, setAvoidCountries] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [avoidAirlines, setAvoidAirlines] = useState([]);\n\n  // Get the country options when component mounts\n  const countryOptions = useMemo(() => {\n    return getUniqueCountries(airports);\n  }, []);\n\n  // Calculates direct distance between airports using Haversine formula\n  function calculateDirectDistance(origin, destination) {\n    const originAirport = airports.find(a => a.IATA === origin);\n    const destAirport = airports.find(a => a.IATA === destination);\n    \n    if (!originAirport || !destAirport) return null;\n\n    const R = 3959; // Earth's radius in miles\n    const lat1 = originAirport.Latitude * Math.PI / 180;\n    const lat2 = destAirport.Latitude * Math.PI / 180;\n    const dLat = (destAirport.Latitude - originAirport.Latitude) * Math.PI / 180;\n    const dLon = (destAirport.Longitude - originAirport.Longitude) * Math.PI / 180;\n\n    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n             Math.cos(lat1) * Math.cos(lat2) *\n             Math.sin(dLon/2) * Math.sin(dLon/2);\n    \n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    return R * c;\n  }\n\n  // Main route finding function with Aeroplan routing rules\n  const findPossibleRoutes = (origin, destination, visited = new Set(), visitedCountries = new Set(), path = [], directDistance = null) => {\n    // Filter routes based on avoided airlines\n    const allRoutes = [\n      ...(avoidAirlines.includes('UA') ? [] : UA_miles),\n      ...(avoidAirlines.includes('SQ') ? [] : SQ_miles),\n      ...(avoidAirlines.includes('LH') ? [] : LH_miles),\n      ...(avoidAirlines.includes('LX') ? [] : LX_miles),\n      ...(avoidAirlines.includes('TG') ? [] : TG_miles),\n      ...(avoidAirlines.includes('BR') ? [] : BR_miles),\n      ...(avoidAirlines.includes('NH') ? [] : NH_miles),\n      ...(avoidAirlines.includes('OS') ? [] : OS_miles),\n      ...(avoidAirlines.includes('OZ') ? [] : OZ_miles),\n      ...(avoidAirlines.includes('NZ') ? [] : NZ_miles),\n      ...(avoidAirlines.includes('SA') ? [] : SA_miles),\n      ...(avoidAirlines.includes('AI') ? [] : AI_miles),\n      ...(avoidAirlines.includes('LO') ? [] : LO_miles),\n      ...(avoidAirlines.includes('SN') ? [] : SN_miles),\n      ...(avoidAirlines.includes('A3') ? [] : A3_miles),\n      ...(avoidAirlines.includes('TP') ? [] : TP_miles),\n      ...(avoidAirlines.includes('MS') ? [] : MS_miles),\n      ...(avoidAirlines.includes('WY') ? [] : WY_miles),\n      ...(avoidAirlines.includes('GF') ? [] : GF_miles),\n      ...(avoidAirlines.includes('AC') ? [] : AC_miles)\n    ];\n\n    const routes = [];\n\n    // Get origin/destination details for zone and region checks\n    const originAirport = airports.find(a => a.IATA === origin);\n    const destAirport = airports.find(a => a.IATA === destination);\n    const isOriginNorthAmerica = ['United States', 'Canada'].includes(originAirport?.Country);\n    const isDestNorthAmerica = ['United States', 'Canada'].includes(destAirport?.Country);\n    const bothInNorthAmerica = isOriginNorthAmerica && isDestNorthAmerica;\n\n    // Track layover counts for routing rules\n    const northAmericaLayovers = path.reduce((count, segment) => {\n      const layoverAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n      return count + (['United States', 'Canada'].includes(layoverAirport?.Country) ? 1 : 0);\n    }, 0);\n\n    // Count existing European layovers in the current path\n    const europeanLayovers = path.reduce((count, segment) => {\n      const layoverAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n      return count + (EUROPEAN_COUNTRIES.has(layoverAirport?.Country) ? 1 : 0);\n    }, 0);\n\n    // Calculate direct distance if not provided\n    if (directDistance === null) {\n      directDistance = calculateDirectDistance(origin, destination);\n      if (!directDistance) return [];\n    }\n\n    // Base case: if we've found a path to the destination\n    if (path.length > 0 && path[path.length - 1].Arrival_IATA === destination) {\n      const totalDistance = path.reduce((sum, segment) => sum + segment.Distance, 0);\n      if (totalDistance <= directDistance * 2) {\n        return [path];\n      }\n      return [];\n    }\n\n    // Don't allow paths longer than 6 segments (5 stops)\n    if (path.length >= 4) {\n      return [];\n    }\n\n    // Get current point and its country\n    const currentPoint = path.length === 0 ? origin : path[path.length - 1].Arrival_IATA;\n    const currentAirport = airports.find(a => a.IATA === currentPoint);\n    \n    if (!currentAirport) return [];\n\n    // Add helper function to count layovers by country\n    const getLayoverCountByCountry = (currentPath) => {\n      const countByCountry = {};\n      currentPath.forEach(segment => {\n        const airport = airports.find(a => a.IATA === segment.Arrival_IATA);\n        if (airport) {\n          countByCountry[airport.Country] = (countByCountry[airport.Country] || 0) + 1;\n        }\n      });\n      return countByCountry;\n    };\n\n    const possibleSegments = allRoutes.filter(route => {\n      if (route[\"Departure IATA\"] !== currentPoint) return false;\n\n      // Get origin and destination countries\n      const originAirport = airports.find(a => a.IATA === origin);\n      const destAirport = airports.find(a => a.IATA === destination);\n      const thisArrivalAirport = airports.find(a => a.IATA === route[\"Arrival IATA\"]);\n      \n      if (!originAirport || !destAirport || !thisArrivalAirport) return false;\n\n      // Check for multiple layovers in same country\n      const layoverCounts = getLayoverCountByCountry(path);\n      const arrivalCountry = thisArrivalAirport.Country;\n      \n      // Allow multiple stops only if it's origin or destination country\n      if (arrivalCountry !== originAirport.Country && \n          arrivalCountry !== destAirport.Country && \n          layoverCounts[arrivalCountry] >= 1) {\n        return false;\n      }\n\n      // Get zones\n      const originZone = airports.find(a => a.IATA === origin)?.Zone;\n      const destZone = airports.find(a => a.IATA === destination)?.Zone;\n      const arrivalZone = airports.find(a => a.IATA === route[\"Arrival IATA\"])?.Zone;\n\n      // If origin and destination are in same zone, prevent connections through different zones\n      if (originZone === destZone && arrivalZone !== originZone) {\n        return false;\n      }\n\n      // Add co-terminal validation\n      if (!isValidCoTerminalRoute(route, path)) {\n        return false;\n      }\n      \n      // Get the arrival airport details\n      const arrivalAirport = airports.find(a => a.IATA === route[\"Arrival IATA\"]);\n      if (!arrivalAirport) return false;\n\n      // Check if adding this segment would exceed US/Canada layover limit\n      const isArrivalNorthAmerica = ['United States', 'Canada'].includes(arrivalAirport.Country);\n      if (isArrivalNorthAmerica && !bothInNorthAmerica && northAmericaLayovers >= 2) {\n        return false;\n      }\n\n      // Check if adding this segment would exceed European layover limit\n      const isEuropeanArrival = EUROPEAN_COUNTRIES.has(arrivalAirport.Country);\n      if (isEuropeanArrival && europeanLayovers >= 2) {\n        return false;\n      }\n\n      // Check if we're not backtracking to a visited airport\n      if (visited.has(route[\"Arrival IATA\"])) return false;\n\n      // Check if we're not backtracking to a visited country\n      // Exception: Allow same country connection if it's a direct continuation\n      const isBacktrackingCountry = visitedCountries.has(arrivalAirport.Country) &&\n                                  arrivalAirport.Country !== currentAirport.Country;\n      if (isBacktrackingCountry) return false;\n\n      return true;\n    });\n\n    // Try each possible next segment\n    for (const segment of possibleSegments) {\n      const arrivalAirport = airports.find(a => a.IATA === segment[\"Arrival IATA\"]);\n      \n      // Calculate running total distance\n      const currentTotalDistance = path.reduce((sum, seg) => sum + seg.Distance, 0) + \n                               segment[\"Flight Distance (miles)\"];\n      \n      // Skip this path if it's already over 2x direct distance\n      if (currentTotalDistance > directDistance * 2) {\n        continue;\n      }\n\n      // Update visited sets\n      const newVisited = new Set(visited);\n      newVisited.add(segment[\"Arrival IATA\"]);\n      \n      const newVisitedCountries = new Set(visitedCountries);\n      newVisitedCountries.add(arrivalAirport.Country);\n\n      const newPath = [...path, {\n        Departure_IATA: segment[\"Departure IATA\"],\n        Arrival_IATA: segment[\"Arrival IATA\"],\n        Distance: segment[\"Flight Distance (miles)\"],\n        Country: arrivalAirport.Country // Add country info for reference\n      }];\n\n      const newRoutes = findPossibleRoutes(\n        origin,\n        destination,\n        newVisited,\n        newVisitedCountries,\n        newPath,\n        directDistance\n      );\n\n      routes.push(...newRoutes);\n    }\n\n    return routes;\n  };\n\n  // Handles the search button click\n  // Updates URL parameters and finds possible routes\n  const handleSearch = async () => {\n    // Show loading overlay immediately\n    setIsLoading(true);\n    setShowResults(false);\n\n    try {\n      // Wait for 250ms to ensure overlay is visible\n      await new Promise(resolve => setTimeout(resolve, 250));\n\n      if (departureAirport && arrivalAirport) {\n        const params = new URLSearchParams();\n        params.set('from', departureAirport);\n        params.set('to', arrivalAirport);\n        params.set('avoidCountries', avoidCountries.join(','));\n        \n        window.history.pushState(\n          {}, \n          '', \n          `${window.location.pathname}?${params.toString()}`\n        );\n        \n        const originAirport = airports.find(a => a.IATA === departureAirport);\n        const visited = new Set([departureAirport]);\n        const visitedCountries = new Set([originAirport.Country]);\n        \n        const routes = findPossibleRoutes(\n          departureAirport, \n          arrivalAirport, \n          visited,\n          visitedCountries\n        );\n        \n        // Filter out routes that go through avoided countries\n        const filteredRoutes = routes.filter(route => \n          isRouteAvoidingCountries(route, avoidCountries)\n        );\n        \n        // Sort routes by total distance\n        const sortedRoutes = filteredRoutes.sort((a, b) => {\n          const distanceA = calculateRouteDistance(a);\n          const distanceB = calculateRouteDistance(b);\n          return distanceA - distanceB; // Low to high\n        });\n        \n        setSearchResults(sortedRoutes);\n        setShowResults(true);\n      }\n    } catch (error) {\n      console.error('Error searching routes:', error);\n    } finally {\n      // Add a small delay before hiding loading screen for smoother transition\n      await new Promise(resolve => setTimeout(resolve, 100));\n      setIsLoading(false);\n    }\n  };\n\n  // Airport search with better IATA and name prioritization\n  const getAirportOptions = (inputValue) => {\n    if (!inputValue) return [];\n    \n    const input = inputValue.toLowerCase().trim();\n    \n    // Priority 1: Exact IATA match\n    const exactIataMatches = airports.filter(airport => \n      airport.IATA.toLowerCase() === input\n    );\n\n    // Priority 2: IATA starts with input\n    const startingIataMatches = airports.filter(airport => \n      airport.IATA.toLowerCase().startsWith(input) &&\n      !exactIataMatches.includes(airport)\n    );\n\n    // Priority 3: Airport name starts with input\n    const startingNameMatches = airports.filter(airport => \n      airport.Name.toLowerCase().startsWith(input) &&\n      !exactIataMatches.includes(airport) &&\n      !startingIataMatches.includes(airport)\n    );\n\n    // Priority 4: Airport name contains input\n    const containingNameMatches = airports.filter(airport => \n      airport.Name.toLowerCase().includes(input) &&\n      !exactIataMatches.includes(airport) &&\n      !startingIataMatches.includes(airport) &&\n      !startingNameMatches.includes(airport)\n    );\n\n    // Combine all matches with proper ordering\n    const allMatches = [\n      ...exactIataMatches,\n      ...startingIataMatches,\n      ...startingNameMatches,\n      ...containingNameMatches\n    ].slice(0, 5); // Limit to 5 results\n\n    return allMatches.map(airport => ({\n      value: airport.IATA,\n      label: `${airport.IATA} - ${airport.Name} (${airport.Country})`\n    }));\n  };\n\n  // Country search with progressive character matching\n  const getCountryOptions = (inputValue) => {\n    if (!inputValue) return [];\n\n    const input = inputValue.toLowerCase().trim();\n    const countries = getUniqueCountries(airports);\n    \n    // First: Exact matches\n    const exactMatches = countries.filter(country => \n      country.toLowerCase() === input\n    );\n\n    // Second: Starting matches (progressive matching)\n    const startingMatches = countries.filter(country => \n      country.toLowerCase().startsWith(input) &&\n      !exactMatches.includes(country)\n    );\n\n    // Third: Progressive character matching\n    const progressiveMatches = countries.filter(country => {\n      if (exactMatches.includes(country) || startingMatches.includes(country)) {\n        return false;\n      }\n      \n      const countryChars = country.toLowerCase();\n      let lastIndex = -1;\n      \n      // Check if characters appear in sequence\n      for (const char of input) {\n        const index = countryChars.indexOf(char, lastIndex + 1);\n        if (index === -1) return false;\n        lastIndex = index;\n      }\n      \n      return true;\n    });\n\n    // Combine all matches with proper ordering\n    const allMatches = [\n      ...exactMatches,\n      ...startingMatches,\n      ...progressiveMatches\n    ].slice(0, 5); // Limit to 5 results\n\n    return allMatches.map(country => ({\n      value: country,\n      label: country\n    }));\n  };\n\n  const filterCountries = (inputValue) => {\n    if (!inputValue) return [];\n    \n    const input = inputValue.toLowerCase().trim();\n    const countries = getUniqueCountries(airports);\n    \n    // Priority 1: Exact matches\n    const exactMatches = countries.filter(country => \n      country.toLowerCase() === input\n    );\n\n    // Priority 2: Starts with input\n    const startingMatches = countries.filter(country => \n      country.toLowerCase().startsWith(input) &&\n      !exactMatches.includes(country)\n    );\n\n    // Priority 3: Contains input\n    const containingMatches = countries.filter(country => \n      country.toLowerCase().includes(input) &&\n      !exactMatches.includes(country) &&\n      !startingMatches.includes(country)\n    );\n\n    return [...exactMatches, ...startingMatches, ...containingMatches]\n      .slice(0, 5)\n      .map(country => ({\n        value: country,\n        label: country\n      }));\n  };\n\n  const loadCountryOptions = (inputValue) => \n    new Promise((resolve) => {\n      resolve(filterCountries(inputValue));\n    });\n\n  const filterAirports = (inputValue) => {\n    if (!inputValue) return [];\n    \n    const input = inputValue.toLowerCase().trim();\n    \n    // Filter out airports from avoided countries first\n    const availableAirports = airports.filter(airport => \n      !avoidCountries.includes(airport.Country)\n    );\n    \n    // Priority 1: Exact IATA match\n    const exactIataMatches = availableAirports.filter(airport => \n      airport.IATA.toLowerCase() === input\n    );\n\n    // Priority 2: IATA starts with input\n    const startingIataMatches = availableAirports.filter(airport => \n      airport.IATA.toLowerCase().startsWith(input) &&\n      !exactIataMatches.includes(airport)\n    );\n\n    // Priority 3: Airport name starts with input\n    const startingNameMatches = availableAirports.filter(airport => \n      airport.Name.toLowerCase().startsWith(input) &&\n      !exactIataMatches.includes(airport) &&\n      !startingIataMatches.includes(airport)\n    );\n\n    // Priority 4: Airport name contains input\n    const containingNameMatches = availableAirports.filter(airport => \n      airport.Name.toLowerCase().includes(input) &&\n      !exactIataMatches.includes(airport) &&\n      !startingIataMatches.includes(airport) &&\n      !startingNameMatches.includes(airport)\n    );\n\n    // Combine all matches with proper ordering\n    const allMatches = [\n      ...exactIataMatches,\n      ...startingIataMatches,\n      ...startingNameMatches,\n      ...containingNameMatches\n    ].slice(0, 5); // Limit to 5 results\n\n    return allMatches.map(airport => ({\n      value: airport.IATA,\n      label: `${airport.IATA} - ${airport.Name} (${airport.Country})`\n    }));\n  };\n\n  const loadAirportOptions = (inputValue) => \n    new Promise((resolve) => {\n      resolve(filterAirports(inputValue));\n    });\n\n  // Filter airlines function\n  const filterAirlines = (inputValue) => {\n    if (!inputValue) return airlines;\n    \n    const input = inputValue.toLowerCase().trim();\n    \n    // Priority 1: Exact airline code match\n    const exactCodeMatches = airlines.filter(airline => \n      airline.value.toLowerCase() === input\n    );\n\n    // Priority 2: Starting airline code match\n    const startingCodeMatches = airlines.filter(airline => \n      airline.value.toLowerCase().startsWith(input) &&\n      !exactCodeMatches.includes(airline)\n    );\n\n    // Priority 3: Airline name contains input\n    const nameMatches = airlines.filter(airline => \n      airline.label.toLowerCase().includes(input) &&\n      !exactCodeMatches.includes(airline) &&\n      !startingCodeMatches.includes(airline)\n    );\n\n    return [...exactCodeMatches, ...startingCodeMatches, ...nameMatches];\n  };\n\n  const loadAirlineOptions = (inputValue) => \n    new Promise((resolve) => {\n      resolve(filterAirlines(inputValue));\n    });\n\n  // Also clear selected airports if their country is now avoided\n  useEffect(() => {\n    if (departureAirport) {\n      const departureCountry = airports.find(a => a.IATA === departureAirport)?.Country;\n      if (departureCountry && avoidCountries.includes(departureCountry)) {\n        setDepartureAirport('');\n      }\n    }\n    \n    if (arrivalAirport) {\n      const arrivalCountry = airports.find(a => a.IATA === arrivalAirport)?.Country;\n      if (arrivalCountry && avoidCountries.includes(arrivalCountry)) {\n        setArrivalAirport('');\n      }\n    }\n  }, [avoidCountries, departureAirport, arrivalAirport]);\n\n  return (\n    <div className=\"search-container\">\n      <div className=\"search-boxes\">\n        <div className=\"airport-search\">\n          <div className=\"search-parameter departure-parameter\">\n            <label style={{ fontWeight: 700 }}>Departure Airport:</label>\n            <AsyncSelect\n              className=\"select-input\"\n              cacheOptions\n              defaultOptions\n              value={departureAirport ? {\n                value: departureAirport,\n                label: airports.find(a => a.IATA === departureAirport)?.IATA + \n                  \" - \" + airports.find(a => a.IATA === departureAirport)?.Name +\n                  \" (\" + airports.find(a => a.IATA === departureAirport)?.Country + \")\"\n              } : null}\n              loadOptions={loadAirportOptions}\n              onChange={(selected) => setDepartureAirport(selected ? selected.value : '')}\n              isDisabled={isLoading}\n              placeholder=\"Type to search airports...\"\n            />\n          </div>\n          <div className=\"search-parameter arrival-parameter\">\n            <label style={{ fontWeight: 700 }}>Arrival Airport:</label>\n            <AsyncSelect\n              className=\"select-input\"\n              cacheOptions\n              defaultOptions\n              value={arrivalAirport ? {\n                value: arrivalAirport,\n                label: airports.find(a => a.IATA === arrivalAirport)?.IATA + \n                  \" - \" + airports.find(a => a.IATA === arrivalAirport)?.Name +\n                  \" (\" + airports.find(a => a.IATA === arrivalAirport)?.Country + \")\"\n              } : null}\n              loadOptions={loadAirportOptions}\n              onChange={(selected) => setArrivalAirport(selected ? selected.value : '')}\n              isDisabled={isLoading}\n              placeholder=\"Type to search airports...\"\n            />\n          </div>\n        </div>\n        <div className=\"search-parameter\">\n          <label>Avoid Countries:</label>\n          <AsyncSelect\n            isMulti\n            className=\"select-input avoid-countries-select\"\n            cacheOptions\n            defaultOptions\n            value={avoidCountries.map(country => ({\n              value: country,\n              label: country\n            }))}\n            loadOptions={loadCountryOptions}\n            onChange={(selected) => {\n              setAvoidCountries(selected ? selected.map(option => option.value) : []);\n            }}\n            isDisabled={isLoading}\n            placeholder=\"Type to search countries...\"\n          />\n        </div>\n        <div className=\"search-parameter\">\n          <label>Avoid Airlines:</label>\n          <AsyncSelect\n            isMulti\n            className=\"select-input avoid-airlines-select\"\n            cacheOptions\n            defaultOptions={airlines}\n            value={avoidAirlines.map(airline => ({\n              value: airline,\n              label: airlines.find(a => a.value === airline)?.label || airline\n            }))}\n            loadOptions={loadAirlineOptions}\n            onChange={(selected) => {\n              setAvoidAirlines(selected ? selected.map(option => option.value) : []);\n            }}\n            isDisabled={isLoading}\n            placeholder=\"Select airlines to avoid...\"\n          />\n        </div>\n        <button \n          className=\"search-button\"\n          onClick={handleSearch}\n          disabled={isLoading || !departureAirport || !arrivalAirport}\n        >\n          {isLoading ? 'Searching...' : 'Search'}\n        </button>\n      </div>\n      <FlightResults \n        results={searchResults} \n        isVisible={showResults}\n      />\n      \n      {isLoading && (\n        <div className=\"loading-overlay\">\n          <div className=\"loading-spinner\"></div>\n          <div className=\"loading-text\">Searching for routes...</div>\n        </div>\n      )}\n    </div>\n  );\n} \n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}