{"ast":null,"code":"var _jsxFileName = \"/Users/hanguyen/Documents/git/routebuilder/src/components/SearchPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { AirportSearch } from './AirportSearch';\nimport { FlightResults } from './FlightResults';\nimport UA_miles from '../data/UA_miles.json';\nimport SQ_miles from '../data/SQ_miles.json';\nimport LH_miles from '../data/LH_miles.json';\nimport LX_miles from '../data/LX_miles.json';\nimport TG_miles from '../data/TG_miles.json';\nimport BR_miles from '../data/BR_miles.json';\nimport NH_miles from '../data/NH_miles.json';\nimport OS_miles from '../data/OS_miles.json';\nimport OZ_miles from '../data/OZ_miles.json';\nimport NZ_miles from '../data/NZ_miles.json';\nimport SA_miles from '../data/SA_miles.json';\nimport AI_miles from '../data/AI_miles.json';\nimport LO_miles from '../data/LO_miles.json';\nimport SN_miles from '../data/SN_miles.json';\nimport A3_miles from '../data/A3_miles.json';\nimport TP_miles from '../data/TP_miles.json';\nimport MS_miles from '../data/MS_miles.json';\nimport WY_miles from '../data/WY_miles.json';\nimport GF_miles from '../data/GF_miles.json';\nimport AC_miles from '../data/AC_miles.json';\nimport { airports } from '../data/airports';\nimport { getUniqueCountries } from '../utils/countryUtils';\nimport Select from 'react-select';\nimport AsyncSelect from 'react-select/async';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COTERMINALS = {\n  // North America\n  'CHI': ['MDW', 'ORD'],\n  'DAL': ['DFW', 'DAL'],\n  'HOU': ['IAH', 'HOU'],\n  'NYC': ['JFK', 'LGA', 'EWR'],\n  'SFL': ['FLL', 'MIA', 'PBI'],\n  'YTO': ['YTZ', 'YHM', 'YYZ'],\n  'WAS': ['IAD', 'DCA'],\n  // South America\n  'BUE': ['AEP', 'EZE'],\n  'RIO': ['GIG', 'SDU'],\n  'SAO': ['CGH', 'GRU', 'VCP'],\n  // Europe\n  'IST': ['IST', 'SAW'],\n  'LON': ['LCY', 'LGW', 'LHR', 'LTN', 'STN'],\n  'MIL': ['BGY', 'LIN', 'MXP'],\n  'MOW': ['DME', 'SVO', 'VNO', 'ZIA'],\n  'PAR': ['CDG', 'ORY'],\n  'STO': ['ARN', 'BMA'],\n  // Asia\n  'BJS': ['PEK', 'PKX'],\n  'JKT': ['CGK', 'HLP'],\n  'OSA': ['ITM', 'KIX', 'UKB'],\n  'SPK': ['CTS', 'OKD'],\n  'SEL': ['GMP', 'ICN'],\n  'SHA': ['SHA', 'PVG'],\n  'TPE': ['TSA', 'TPE'],\n  'TYO': ['HND', 'NRT']\n};\nfunction getCoTerminalGroup(airport) {\n  for (const [group, airports] of Object.entries(COTERMINALS)) {\n    if (airports.includes(airport)) {\n      return group;\n    }\n  }\n  return null;\n}\nfunction isValidCoTerminalRoute(newSegment, existingPath) {\n  const allAirports = [...existingPath.map(seg => seg.Departure_IATA), ...existingPath.map(seg => seg.Arrival_IATA), newSegment[\"Departure IATA\"], newSegment[\"Arrival IATA\"]];\n  const usedCoTerminals = new Map();\n  for (const airport of allAirports) {\n    const coTerminalGroup = getCoTerminalGroup(airport);\n    if (coTerminalGroup) {\n      if (usedCoTerminals.has(coTerminalGroup)) {\n        // If we already used a different airport from this co-terminal group\n        if (usedCoTerminals.get(coTerminalGroup) !== airport) {\n          return false;\n        }\n      } else {\n        usedCoTerminals.set(coTerminalGroup, airport);\n      }\n    }\n  }\n  return true;\n}\n\n// Constants for region restrictions\nconst EUROPEAN_COUNTRIES = new Set(['Germany', 'United Kingdom', 'France', 'Italy', 'Spain', 'Poland', 'Ukraine', 'Romania', 'Netherlands', 'Belgium', 'Czechia', 'Sweden', 'Portugal', 'Greece', 'Hungary', 'Austria', 'Belarus', 'Switzerland', 'Bulgaria', 'Serbia', 'Denmark', 'Finland', 'Norway', 'Slovakia', 'Ireland', 'Croatia', 'Bosnia And Herzegovina', 'Moldova', 'Lithuania', 'Albania', 'Slovenia', 'Latvia', 'North Macedonia', 'Estonia', 'Luxembourg', 'Montenegro', 'Malta', 'Iceland']);\n\n// First, let's create a helper function to check if a route avoids certain countries\nconst isRouteAvoidingCountries = (route, avoidCountries) => {\n  // Check each airport in the route\n  for (const segment of route) {\n    const departureAirport = airports.find(a => a.IATA === segment.Departure_IATA);\n    const arrivalAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n\n    // If any airport in the route is in an avoided country, return false\n    if (departureAirport && avoidCountries.includes(departureAirport.Country)) {\n      return false;\n    }\n    if (arrivalAirport && avoidCountries.includes(arrivalAirport.Country)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n// Create airlines list from your JSON imports\nconst airlines = [{\n  value: 'A3',\n  label: 'Aegean Airlines (A3)'\n}, {\n  value: 'AC',\n  label: 'Air Canada (AC)'\n}, {\n  value: 'AI',\n  label: 'Air India (AI)'\n}, {\n  value: 'NZ',\n  label: 'Air New Zealand (NZ)'\n}, {\n  value: 'NH',\n  label: 'All Nippon Airways (NH)'\n}, {\n  value: 'OZ',\n  label: 'Asiana Airlines (OZ)'\n}, {\n  value: 'OS',\n  label: 'Austrian Airlines (OS)'\n}, {\n  value: 'SN',\n  label: 'Brussels Airlines (SN)'\n}, {\n  value: 'MS',\n  label: 'EgyptAir (MS)'\n}, {\n  value: 'BR',\n  label: 'EVA Air (BR)'\n}, {\n  value: 'GF',\n  label: 'Gulf Air (GF)'\n}, {\n  value: 'LO',\n  label: 'LOT Polish Airlines (LO)'\n}, {\n  value: 'LH',\n  label: 'Lufthansa (LH)'\n}, {\n  value: 'WY',\n  label: 'Oman Air (WY)'\n}, {\n  value: 'SQ',\n  label: 'Singapore Airlines (SQ)'\n}, {\n  value: 'SA',\n  label: 'South African Airways (SA)'\n}, {\n  value: 'LX',\n  label: 'Swiss International Air Lines (LX)'\n}, {\n  value: 'TP',\n  label: 'TAP Air Portugal (TP)'\n}, {\n  value: 'TG',\n  label: 'Thai Airways (TG)'\n}, {\n  value: 'UA',\n  label: 'United Airlines (UA)'\n}].sort((a, b) => a.label.localeCompare(b.label));\n\n// Helper function to calculate distance between two points using Haversine formula\nconst calculateDistance = (lat1, lon1, lat2, lon2) => {\n  const R = 6371; // Earth's radius in kilometers\n  const dLat = (lat2 - lat1) * Math.PI / 180;\n  const dLon = (lon2 - lon1) * Math.PI / 180;\n  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n};\n\n// Calculate total distance for a route\nconst calculateRouteDistance = route => {\n  let totalDistance = 0;\n  for (let i = 0; i < route.length; i++) {\n    const segment = route[i];\n    const departureAirport = airports.find(a => a.IATA === segment.Departure_IATA);\n    const arrivalAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n    if (departureAirport && arrivalAirport) {\n      const segmentDistance = calculateDistance(departureAirport.Latitude, departureAirport.Longitude, arrivalAirport.Latitude, arrivalAirport.Longitude);\n      totalDistance += segmentDistance;\n    }\n  }\n  return totalDistance;\n};\nexport function SearchPage() {\n  _s();\n  var _airports$find3, _airports$find4, _airports$find5, _airports$find6, _airports$find7, _airports$find8;\n  // State for selected airports and search results\n  const [departureAirport, setDepartureAirport] = useState('');\n  const [arrivalAirport, setArrivalAirport] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [showResults, setShowResults] = useState(false);\n  const [avoidCountries, setAvoidCountries] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [avoidAirlines, setAvoidAirlines] = useState([]);\n\n  // Get the country options when component mounts\n  const countryOptions = useMemo(() => {\n    return getUniqueCountries(airports);\n  }, []);\n\n  // Calculates direct distance between airports using Haversine formula\n  function calculateDirectDistance(origin, destination) {\n    const originAirport = airports.find(a => a.IATA === origin);\n    const destAirport = airports.find(a => a.IATA === destination);\n    if (!originAirport || !destAirport) return null;\n    const R = 3959; // Earth's radius in miles\n    const lat1 = originAirport.Latitude * Math.PI / 180;\n    const lat2 = destAirport.Latitude * Math.PI / 180;\n    const dLat = (destAirport.Latitude - originAirport.Latitude) * Math.PI / 180;\n    const dLon = (destAirport.Longitude - originAirport.Longitude) * Math.PI / 180;\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1) * Math.cos(lat2) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  }\n\n  // ===============================\n  // Route Finding Core Logic\n  // ===============================\n\n  const findPossibleRoutes = (origin, destination, visited = new Set(), visitedCountries = new Set(), path = [], directDistance = null) => {\n    /**\n     * Helper: Counts how many times each country appears as a layover in the path\n     * Used to prevent multiple stops in transit countries\n     * @param {Array} currentPath - Current sequence of flight segments\n     * @returns {Object} - Dictionary of country codes to layover counts\n     */\n    const getLayoverCountByCountry = currentPath => {\n      const countByCountry = {};\n      currentPath.forEach(segment => {\n        const airport = airports.find(a => a.IATA === segment.Arrival_IATA);\n        if (airport) {\n          countByCountry[airport.Country] = (countByCountry[airport.Country] || 0) + 1;\n        }\n      });\n      return countByCountry;\n    };\n\n    // Create filtered allRoutes based on avoided airlines\n    const allRoutes = [...(avoidAirlines.includes('UA') ? [] : UA_miles), ...(avoidAirlines.includes('SQ') ? [] : SQ_miles), ...(avoidAirlines.includes('LH') ? [] : LH_miles), ...(avoidAirlines.includes('LX') ? [] : LX_miles), ...(avoidAirlines.includes('TG') ? [] : TG_miles), ...(avoidAirlines.includes('BR') ? [] : BR_miles), ...(avoidAirlines.includes('NH') ? [] : NH_miles), ...(avoidAirlines.includes('OS') ? [] : OS_miles), ...(avoidAirlines.includes('OZ') ? [] : OZ_miles), ...(avoidAirlines.includes('NZ') ? [] : NZ_miles), ...(avoidAirlines.includes('SA') ? [] : SA_miles), ...(avoidAirlines.includes('AI') ? [] : AI_miles), ...(avoidAirlines.includes('LO') ? [] : LO_miles), ...(avoidAirlines.includes('SN') ? [] : SN_miles), ...(avoidAirlines.includes('A3') ? [] : A3_miles), ...(avoidAirlines.includes('TP') ? [] : TP_miles), ...(avoidAirlines.includes('MS') ? [] : MS_miles), ...(avoidAirlines.includes('WY') ? [] : WY_miles), ...(avoidAirlines.includes('GF') ? [] : GF_miles), ...(avoidAirlines.includes('AC') ? [] : AC_miles)];\n    const routes = [];\n\n    // Get origin and destination airport details for US/Canada check\n    const originAirport = airports.find(a => a.IATA === origin);\n    const destAirport = airports.find(a => a.IATA === destination);\n    const isOriginNorthAmerica = ['United States', 'Canada'].includes(originAirport === null || originAirport === void 0 ? void 0 : originAirport.Country);\n    const isDestNorthAmerica = ['United States', 'Canada'].includes(destAirport === null || destAirport === void 0 ? void 0 : destAirport.Country);\n    const bothInNorthAmerica = isOriginNorthAmerica && isDestNorthAmerica;\n\n    // Count existing US/Canada layovers in the current path\n    const northAmericaLayovers = path.reduce((count, segment) => {\n      const layoverAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n      return count + (['United States', 'Canada'].includes(layoverAirport === null || layoverAirport === void 0 ? void 0 : layoverAirport.Country) ? 1 : 0);\n    }, 0);\n\n    // Count existing European layovers in the current path\n    const europeanLayovers = path.reduce((count, segment) => {\n      const layoverAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n      return count + (EUROPEAN_COUNTRIES.has(layoverAirport === null || layoverAirport === void 0 ? void 0 : layoverAirport.Country) ? 1 : 0);\n    }, 0);\n\n    // Calculate direct distance if not provided\n    if (directDistance === null) {\n      directDistance = calculateDirectDistance(origin, destination);\n      if (!directDistance) return [];\n    }\n\n    // Base case: if we've found a path to the destination\n    if (path.length > 0 && path[path.length - 1].Arrival_IATA === destination) {\n      const totalDistance = path.reduce((sum, segment) => sum + segment.Distance, 0);\n      if (totalDistance <= directDistance * 2) {\n        return [path];\n      }\n      return [];\n    }\n\n    // Don't allow paths longer than 6 segments (5 stops)\n    if (path.length >= 4) {\n      return [];\n    }\n\n    // Get current point and its country\n    const currentPoint = path.length === 0 ? origin : path[path.length - 1].Arrival_IATA;\n    const currentAirport = airports.find(a => a.IATA === currentPoint);\n    if (!currentAirport) return [];\n    const possibleSegments = allRoutes.filter(route => {\n      // Basic route validation - must connect from current point\n      if (route[\"Departure IATA\"] !== currentPoint) return false;\n\n      // Get airport details for origin, destination, and next possible stop\n      const originAirport = airports.find(a => a.IATA === origin);\n      const destAirport = airports.find(a => a.IATA === destination);\n      const arrivalAirport = airports.find(a => a.IATA === route[\"Arrival IATA\"]);\n      if (!originAirport || !destAirport || !arrivalAirport) return false;\n\n      // Rule: Prevent multiple layovers in transit countries\n      // Exception: Allow multiple stops in origin/destination country\n      const layoverCounts = getLayoverCountByCountry(path);\n      const arrivalCountry = arrivalAirport.Country;\n      if (arrivalCountry !== originAirport.Country && arrivalCountry !== destAirport.Country && layoverCounts[arrivalCountry] >= 1) {\n        return false;\n      }\n\n      // Rule: Maximum 2 stops in North America for non-NA itineraries\n      const isArrivalNorthAmerica = ['United States', 'Canada'].includes(arrivalAirport.Country);\n      if (isArrivalNorthAmerica && !bothInNorthAmerica && northAmericaLayovers >= 2) {\n        return false;\n      }\n\n      // Rule: Maximum 2 stops in Europe\n      const isEuropeanArrival = EUROPEAN_COUNTRIES.has(arrivalAirport.Country);\n      if (isEuropeanArrival && europeanLayovers >= 2) {\n        return false;\n      }\n\n      // Rule: No revisiting airports (prevent loops)\n      if (visited.has(route[\"Arrival IATA\"])) return false;\n\n      // Rule: No backtracking to previously visited countries\n      // Exception: Allow same-country connections (e.g., FRA-MUC)\n      const isBacktrackingCountry = visitedCountries.has(arrivalAirport.Country) && arrivalAirport.Country !== currentAirport.Country;\n      if (isBacktrackingCountry) return false;\n      return true;\n    });\n\n    // Try each possible next segment\n    for (const segment of possibleSegments) {\n      const arrivalAirport = airports.find(a => a.IATA === segment[\"Arrival IATA\"]);\n\n      // Calculate running total distance\n      const currentTotalDistance = path.reduce((sum, seg) => sum + seg.Distance, 0) + segment[\"Flight Distance (miles)\"];\n\n      // Skip this path if it's already over 2x direct distance\n      if (currentTotalDistance > directDistance * 2) {\n        continue;\n      }\n\n      // Update visited sets\n      const newVisited = new Set(visited);\n      newVisited.add(segment[\"Arrival IATA\"]);\n      const newVisitedCountries = new Set(visitedCountries);\n      newVisitedCountries.add(arrivalAirport.Country);\n      const newPath = [...path, {\n        Departure_IATA: segment[\"Departure IATA\"],\n        Arrival_IATA: segment[\"Arrival IATA\"],\n        Distance: segment[\"Flight Distance (miles)\"],\n        Country: arrivalAirport.Country // Add country info for reference\n      }];\n      const newRoutes = findPossibleRoutes(origin, destination, newVisited, newVisitedCountries, newPath, directDistance);\n      routes.push(...newRoutes);\n    }\n    return routes;\n  };\n\n  // Handles the search button click\n  // Updates URL parameters and finds possible routes\n  const handleSearch = async () => {\n    // Show loading overlay immediately\n    setIsLoading(true);\n    setShowResults(false);\n    try {\n      // Wait for 250ms to ensure overlay is visible\n      await new Promise(resolve => setTimeout(resolve, 250));\n      if (departureAirport && arrivalAirport) {\n        const params = new URLSearchParams();\n        params.set('from', departureAirport);\n        params.set('to', arrivalAirport);\n        params.set('avoidCountries', avoidCountries.join(','));\n        window.history.pushState({}, '', `${window.location.pathname}?${params.toString()}`);\n        const originAirport = airports.find(a => a.IATA === departureAirport);\n        const visited = new Set([departureAirport]);\n        const visitedCountries = new Set([originAirport.Country]);\n        const routes = findPossibleRoutes(departureAirport, arrivalAirport, visited, visitedCountries);\n\n        // Filter out routes that go through avoided countries\n        const filteredRoutes = routes.filter(route => isRouteAvoidingCountries(route, avoidCountries));\n\n        // Sort routes by total distance\n        const sortedRoutes = filteredRoutes.sort((a, b) => {\n          const distanceA = calculateRouteDistance(a);\n          const distanceB = calculateRouteDistance(b);\n          return distanceA - distanceB; // Low to high\n        });\n        setSearchResults(sortedRoutes);\n        setShowResults(true);\n      }\n    } catch (error) {\n      console.error('Error searching routes:', error);\n    } finally {\n      // Add a small delay before hiding loading screen for smoother transition\n      await new Promise(resolve => setTimeout(resolve, 100));\n      setIsLoading(false);\n    }\n  };\n\n  // Airport search with better IATA and name prioritization\n  const getAirportOptions = inputValue => {\n    if (!inputValue) return [];\n    const input = inputValue.toLowerCase().trim();\n\n    // Priority 1: Exact IATA match\n    const exactIataMatches = airports.filter(airport => airport.IATA.toLowerCase() === input);\n\n    // Priority 2: IATA starts with input\n    const startingIataMatches = airports.filter(airport => airport.IATA.toLowerCase().startsWith(input) && !exactIataMatches.includes(airport));\n\n    // Priority 3: Airport name starts with input\n    const startingNameMatches = airports.filter(airport => airport.Name.toLowerCase().startsWith(input) && !exactIataMatches.includes(airport) && !startingIataMatches.includes(airport));\n\n    // Priority 4: Airport name contains input\n    const containingNameMatches = airports.filter(airport => airport.Name.toLowerCase().includes(input) && !exactIataMatches.includes(airport) && !startingIataMatches.includes(airport) && !startingNameMatches.includes(airport));\n\n    // Combine all matches with proper ordering\n    const allMatches = [...exactIataMatches, ...startingIataMatches, ...startingNameMatches, ...containingNameMatches].slice(0, 5); // Limit to 5 results\n\n    return allMatches.map(airport => ({\n      value: airport.IATA,\n      label: `${airport.IATA} - ${airport.Name} (${airport.Country})`\n    }));\n  };\n\n  // Country search with progressive character matching\n  const getCountryOptions = inputValue => {\n    if (!inputValue) return [];\n    const input = inputValue.toLowerCase().trim();\n    const countries = getUniqueCountries(airports);\n\n    // First: Exact matches\n    const exactMatches = countries.filter(country => country.toLowerCase() === input);\n\n    // Second: Starting matches (progressive matching)\n    const startingMatches = countries.filter(country => country.toLowerCase().startsWith(input) && !exactMatches.includes(country));\n\n    // Third: Progressive character matching\n    const progressiveMatches = countries.filter(country => {\n      if (exactMatches.includes(country) || startingMatches.includes(country)) {\n        return false;\n      }\n      const countryChars = country.toLowerCase();\n      let lastIndex = -1;\n\n      // Check if characters appear in sequence\n      for (const char of input) {\n        const index = countryChars.indexOf(char, lastIndex + 1);\n        if (index === -1) return false;\n        lastIndex = index;\n      }\n      return true;\n    });\n\n    // Combine all matches with proper ordering\n    const allMatches = [...exactMatches, ...startingMatches, ...progressiveMatches].slice(0, 5); // Limit to 5 results\n\n    return allMatches.map(country => ({\n      value: country,\n      label: country\n    }));\n  };\n  const filterCountries = inputValue => {\n    if (!inputValue) return [];\n    const input = inputValue.toLowerCase().trim();\n    const countries = getUniqueCountries(airports);\n\n    // Priority 1: Exact matches\n    const exactMatches = countries.filter(country => country.toLowerCase() === input);\n\n    // Priority 2: Starts with input\n    const startingMatches = countries.filter(country => country.toLowerCase().startsWith(input) && !exactMatches.includes(country));\n\n    // Priority 3: Contains input\n    const containingMatches = countries.filter(country => country.toLowerCase().includes(input) && !exactMatches.includes(country) && !startingMatches.includes(country));\n    return [...exactMatches, ...startingMatches, ...containingMatches].slice(0, 5).map(country => ({\n      value: country,\n      label: country\n    }));\n  };\n  const loadCountryOptions = inputValue => new Promise(resolve => {\n    resolve(filterCountries(inputValue));\n  });\n  const filterAirports = inputValue => {\n    if (!inputValue) return [];\n    const input = inputValue.toLowerCase().trim();\n\n    // Filter out airports from avoided countries first\n    const availableAirports = airports.filter(airport => !avoidCountries.includes(airport.Country));\n\n    // Priority 1: Exact IATA match\n    const exactIataMatches = availableAirports.filter(airport => airport.IATA.toLowerCase() === input);\n\n    // Priority 2: IATA starts with input\n    const startingIataMatches = availableAirports.filter(airport => airport.IATA.toLowerCase().startsWith(input) && !exactIataMatches.includes(airport));\n\n    // Priority 3: Airport name starts with input\n    const startingNameMatches = availableAirports.filter(airport => airport.Name.toLowerCase().startsWith(input) && !exactIataMatches.includes(airport) && !startingIataMatches.includes(airport));\n\n    // Priority 4: Airport name contains input\n    const containingNameMatches = availableAirports.filter(airport => airport.Name.toLowerCase().includes(input) && !exactIataMatches.includes(airport) && !startingIataMatches.includes(airport) && !startingNameMatches.includes(airport));\n\n    // Combine all matches with proper ordering\n    const allMatches = [...exactIataMatches, ...startingIataMatches, ...startingNameMatches, ...containingNameMatches].slice(0, 5); // Limit to 5 results\n\n    return allMatches.map(airport => ({\n      value: airport.IATA,\n      label: `${airport.IATA} - ${airport.Name} (${airport.Country})`\n    }));\n  };\n  const loadAirportOptions = inputValue => new Promise(resolve => {\n    resolve(filterAirports(inputValue));\n  });\n\n  // Filter airlines function\n  const filterAirlines = inputValue => {\n    if (!inputValue) return airlines;\n    const input = inputValue.toLowerCase().trim();\n\n    // Priority 1: Exact airline code match\n    const exactCodeMatches = airlines.filter(airline => airline.value.toLowerCase() === input);\n\n    // Priority 2: Starting airline code match\n    const startingCodeMatches = airlines.filter(airline => airline.value.toLowerCase().startsWith(input) && !exactCodeMatches.includes(airline));\n\n    // Priority 3: Airline name contains input\n    const nameMatches = airlines.filter(airline => airline.label.toLowerCase().includes(input) && !exactCodeMatches.includes(airline) && !startingCodeMatches.includes(airline));\n    return [...exactCodeMatches, ...startingCodeMatches, ...nameMatches];\n  };\n  const loadAirlineOptions = inputValue => new Promise(resolve => {\n    resolve(filterAirlines(inputValue));\n  });\n\n  // Also clear selected airports if their country is now avoided\n  useEffect(() => {\n    if (departureAirport) {\n      var _airports$find;\n      const departureCountry = (_airports$find = airports.find(a => a.IATA === departureAirport)) === null || _airports$find === void 0 ? void 0 : _airports$find.Country;\n      if (departureCountry && avoidCountries.includes(departureCountry)) {\n        setDepartureAirport('');\n      }\n    }\n    if (arrivalAirport) {\n      var _airports$find2;\n      const arrivalCountry = (_airports$find2 = airports.find(a => a.IATA === arrivalAirport)) === null || _airports$find2 === void 0 ? void 0 : _airports$find2.Country;\n      if (arrivalCountry && avoidCountries.includes(arrivalCountry)) {\n        setArrivalAirport('');\n      }\n    }\n  }, [avoidCountries, departureAirport, arrivalAirport]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-boxes\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"airport-search\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-parameter departure-parameter\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              fontWeight: 700\n            },\n            children: \"Departure Airport:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 703,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AsyncSelect, {\n            className: \"select-input\",\n            cacheOptions: true,\n            defaultOptions: true,\n            value: departureAirport ? {\n              value: departureAirport,\n              label: ((_airports$find3 = airports.find(a => a.IATA === departureAirport)) === null || _airports$find3 === void 0 ? void 0 : _airports$find3.IATA) + \" - \" + ((_airports$find4 = airports.find(a => a.IATA === departureAirport)) === null || _airports$find4 === void 0 ? void 0 : _airports$find4.Name) + \" (\" + ((_airports$find5 = airports.find(a => a.IATA === departureAirport)) === null || _airports$find5 === void 0 ? void 0 : _airports$find5.Country) + \")\"\n            } : null,\n            loadOptions: loadAirportOptions,\n            onChange: selected => setDepartureAirport(selected ? selected.value : ''),\n            isDisabled: isLoading,\n            placeholder: \"Type to search airports...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 704,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 702,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-parameter arrival-parameter\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              fontWeight: 700\n            },\n            children: \"Arrival Airport:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 721,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AsyncSelect, {\n            className: \"select-input\",\n            cacheOptions: true,\n            defaultOptions: true,\n            value: arrivalAirport ? {\n              value: arrivalAirport,\n              label: ((_airports$find6 = airports.find(a => a.IATA === arrivalAirport)) === null || _airports$find6 === void 0 ? void 0 : _airports$find6.IATA) + \" - \" + ((_airports$find7 = airports.find(a => a.IATA === arrivalAirport)) === null || _airports$find7 === void 0 ? void 0 : _airports$find7.Name) + \" (\" + ((_airports$find8 = airports.find(a => a.IATA === arrivalAirport)) === null || _airports$find8 === void 0 ? void 0 : _airports$find8.Country) + \")\"\n            } : null,\n            loadOptions: loadAirportOptions,\n            onChange: selected => setArrivalAirport(selected ? selected.value : ''),\n            isDisabled: isLoading,\n            placeholder: \"Type to search airports...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 722,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 720,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 701,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-parameter\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Avoid Countries:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 740,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AsyncSelect, {\n          isMulti: true,\n          className: \"select-input avoid-countries-select\",\n          cacheOptions: true,\n          defaultOptions: true,\n          value: avoidCountries.map(country => ({\n            value: country,\n            label: country\n          })),\n          loadOptions: loadCountryOptions,\n          onChange: selected => {\n            setAvoidCountries(selected ? selected.map(option => option.value) : []);\n          },\n          isDisabled: isLoading,\n          placeholder: \"Type to search countries...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 741,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 739,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-parameter\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Avoid Airlines:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 759,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AsyncSelect, {\n          isMulti: true,\n          className: \"select-input avoid-airlines-select\",\n          cacheOptions: true,\n          defaultOptions: airlines,\n          value: avoidAirlines.map(airline => {\n            var _airlines$find;\n            return {\n              value: airline,\n              label: ((_airlines$find = airlines.find(a => a.value === airline)) === null || _airlines$find === void 0 ? void 0 : _airlines$find.label) || airline\n            };\n          }),\n          loadOptions: loadAirlineOptions,\n          onChange: selected => {\n            setAvoidAirlines(selected ? selected.map(option => option.value) : []);\n          },\n          isDisabled: isLoading,\n          placeholder: \"Select airlines to avoid...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 760,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 758,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"search-button\",\n        onClick: handleSearch,\n        disabled: isLoading || !departureAirport || !arrivalAirport,\n        children: isLoading ? 'Searching...' : 'Search'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 777,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 700,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FlightResults, {\n      results: searchResults,\n      isVisible: showResults\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 785,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-overlay\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 792,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-text\",\n        children: \"Searching for routes...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 793,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 791,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 699,\n    columnNumber: 5\n  }, this);\n}\n_s(SearchPage, \"GoCqF8MviSOVuyJkfAFSeg2vp3Q=\");\n_c = SearchPage;\nvar _c;\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","AirportSearch","FlightResults","UA_miles","SQ_miles","LH_miles","LX_miles","TG_miles","BR_miles","NH_miles","OS_miles","OZ_miles","NZ_miles","SA_miles","AI_miles","LO_miles","SN_miles","A3_miles","TP_miles","MS_miles","WY_miles","GF_miles","AC_miles","airports","getUniqueCountries","Select","AsyncSelect","jsxDEV","_jsxDEV","COTERMINALS","getCoTerminalGroup","airport","group","Object","entries","includes","isValidCoTerminalRoute","newSegment","existingPath","allAirports","map","seg","Departure_IATA","Arrival_IATA","usedCoTerminals","Map","coTerminalGroup","has","get","set","EUROPEAN_COUNTRIES","Set","isRouteAvoidingCountries","route","avoidCountries","segment","departureAirport","find","a","IATA","arrivalAirport","Country","airlines","value","label","sort","b","localeCompare","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","Math","PI","dLon","sin","cos","c","atan2","sqrt","calculateRouteDistance","totalDistance","i","length","segmentDistance","Latitude","Longitude","SearchPage","_s","_airports$find3","_airports$find4","_airports$find5","_airports$find6","_airports$find7","_airports$find8","setDepartureAirport","setArrivalAirport","searchResults","setSearchResults","showResults","setShowResults","setAvoidCountries","isLoading","setIsLoading","avoidAirlines","setAvoidAirlines","countryOptions","calculateDirectDistance","origin","destination","originAirport","destAirport","findPossibleRoutes","visited","visitedCountries","path","directDistance","getLayoverCountByCountry","currentPath","countByCountry","forEach","allRoutes","routes","isOriginNorthAmerica","isDestNorthAmerica","bothInNorthAmerica","northAmericaLayovers","reduce","count","layoverAirport","europeanLayovers","sum","Distance","currentPoint","currentAirport","possibleSegments","filter","layoverCounts","arrivalCountry","isArrivalNorthAmerica","isEuropeanArrival","isBacktrackingCountry","currentTotalDistance","newVisited","add","newVisitedCountries","newPath","newRoutes","push","handleSearch","Promise","resolve","setTimeout","params","URLSearchParams","join","window","history","pushState","location","pathname","toString","filteredRoutes","sortedRoutes","distanceA","distanceB","error","console","getAirportOptions","inputValue","input","toLowerCase","trim","exactIataMatches","startingIataMatches","startsWith","startingNameMatches","Name","containingNameMatches","allMatches","slice","getCountryOptions","countries","exactMatches","country","startingMatches","progressiveMatches","countryChars","lastIndex","char","index","indexOf","filterCountries","containingMatches","loadCountryOptions","filterAirports","availableAirports","loadAirportOptions","filterAirlines","exactCodeMatches","airline","startingCodeMatches","nameMatches","loadAirlineOptions","_airports$find","departureCountry","_airports$find2","className","children","style","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","cacheOptions","defaultOptions","loadOptions","onChange","selected","isDisabled","placeholder","isMulti","option","_airlines$find","onClick","disabled","results","isVisible","_c","$RefreshReg$"],"sources":["/Users/hanguyen/Documents/git/routebuilder/src/components/SearchPage.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { AirportSearch } from './AirportSearch';\nimport { FlightResults } from './FlightResults';\nimport UA_miles from '../data/UA_miles.json';\nimport SQ_miles from '../data/SQ_miles.json';\nimport LH_miles from '../data/LH_miles.json';\nimport LX_miles from '../data/LX_miles.json';\nimport TG_miles from '../data/TG_miles.json';\nimport BR_miles from '../data/BR_miles.json';\nimport NH_miles from '../data/NH_miles.json';\nimport OS_miles from '../data/OS_miles.json';\nimport OZ_miles from '../data/OZ_miles.json';\nimport NZ_miles from '../data/NZ_miles.json';   \nimport SA_miles from '../data/SA_miles.json';\nimport AI_miles from '../data/AI_miles.json';\nimport LO_miles from '../data/LO_miles.json';\nimport SN_miles from '../data/SN_miles.json'; \nimport A3_miles from '../data/A3_miles.json';\nimport TP_miles from '../data/TP_miles.json';\nimport MS_miles from '../data/MS_miles.json';\nimport WY_miles from '../data/WY_miles.json';\nimport GF_miles from '../data/GF_miles.json';\nimport AC_miles from '../data/AC_miles.json';\nimport { airports } from '../data/airports';\nimport { getUniqueCountries } from '../utils/countryUtils';\nimport Select from 'react-select';\nimport AsyncSelect from 'react-select/async';\n\nconst COTERMINALS = {\n  // North America\n  'CHI': ['MDW', 'ORD'],\n  'DAL': ['DFW', 'DAL'],\n  'HOU': ['IAH', 'HOU'],\n  'NYC': ['JFK', 'LGA', 'EWR'],\n  'SFL': ['FLL', 'MIA', 'PBI'],\n  'YTO': ['YTZ', 'YHM', 'YYZ'],\n  'WAS': ['IAD', 'DCA'],\n  \n  // South America\n  'BUE': ['AEP', 'EZE'],\n  'RIO': ['GIG', 'SDU'],\n  'SAO': ['CGH', 'GRU', 'VCP'],\n  \n  // Europe\n  'IST': ['IST', 'SAW'],\n  'LON': ['LCY', 'LGW', 'LHR', 'LTN', 'STN'],\n  'MIL': ['BGY', 'LIN', 'MXP'],\n  'MOW': ['DME', 'SVO', 'VNO', 'ZIA'],\n  'PAR': ['CDG', 'ORY'],\n  'STO': ['ARN', 'BMA'],\n  \n  // Asia\n  'BJS': ['PEK', 'PKX'],\n  'JKT': ['CGK', 'HLP'],\n  'OSA': ['ITM', 'KIX', 'UKB'],\n  'SPK': ['CTS', 'OKD'],\n  'SEL': ['GMP', 'ICN'],\n  'SHA': ['SHA', 'PVG'],\n  'TPE': ['TSA', 'TPE'],\n  'TYO': ['HND', 'NRT']\n};\n\nfunction getCoTerminalGroup(airport) {\n  for (const [group, airports] of Object.entries(COTERMINALS)) {\n    if (airports.includes(airport)) {\n      return group;\n    }\n  }\n  return null;\n}\n\nfunction isValidCoTerminalRoute(newSegment, existingPath) {\n  const allAirports = [\n    ...existingPath.map(seg => seg.Departure_IATA),\n    ...existingPath.map(seg => seg.Arrival_IATA),\n    newSegment[\"Departure IATA\"],\n    newSegment[\"Arrival IATA\"]\n  ];\n  \n  const usedCoTerminals = new Map();\n  \n  for (const airport of allAirports) {\n    const coTerminalGroup = getCoTerminalGroup(airport);\n    if (coTerminalGroup) {\n      if (usedCoTerminals.has(coTerminalGroup)) {\n        // If we already used a different airport from this co-terminal group\n        if (usedCoTerminals.get(coTerminalGroup) !== airport) {\n          return false;\n        }\n      } else {\n        usedCoTerminals.set(coTerminalGroup, airport);\n      }\n    }\n  }\n  \n  return true;\n}\n\n// Constants for region restrictions\nconst EUROPEAN_COUNTRIES = new Set([\n  'Germany', 'United Kingdom', 'France', 'Italy', 'Spain', 'Poland', 'Ukraine', \n  'Romania', 'Netherlands', 'Belgium', 'Czechia', 'Sweden', 'Portugal', 'Greece',\n  'Hungary', 'Austria', 'Belarus', 'Switzerland', 'Bulgaria', 'Serbia', 'Denmark',\n  'Finland', 'Norway', 'Slovakia', 'Ireland', 'Croatia', 'Bosnia And Herzegovina',\n  'Moldova', 'Lithuania', 'Albania', 'Slovenia', 'Latvia', 'North Macedonia',\n  'Estonia', 'Luxembourg', 'Montenegro', 'Malta', 'Iceland'\n]);\n\n// First, let's create a helper function to check if a route avoids certain countries\nconst isRouteAvoidingCountries = (route, avoidCountries) => {\n  // Check each airport in the route\n  for (const segment of route) {\n    const departureAirport = airports.find(a => a.IATA === segment.Departure_IATA);\n    const arrivalAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n    \n    // If any airport in the route is in an avoided country, return false\n    if (departureAirport && avoidCountries.includes(departureAirport.Country)) {\n      return false;\n    }\n    if (arrivalAirport && avoidCountries.includes(arrivalAirport.Country)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n// Create airlines list from your JSON imports\nconst airlines = [\n  { value: 'A3', label: 'Aegean Airlines (A3)' },\n  { value: 'AC', label: 'Air Canada (AC)' },\n  { value: 'AI', label: 'Air India (AI)' },\n  { value: 'NZ', label: 'Air New Zealand (NZ)' },\n  { value: 'NH', label: 'All Nippon Airways (NH)' },\n  { value: 'OZ', label: 'Asiana Airlines (OZ)' },\n  { value: 'OS', label: 'Austrian Airlines (OS)' },\n  { value: 'SN', label: 'Brussels Airlines (SN)' },\n  { value: 'MS', label: 'EgyptAir (MS)' },\n  { value: 'BR', label: 'EVA Air (BR)' },\n  { value: 'GF', label: 'Gulf Air (GF)' },\n  { value: 'LO', label: 'LOT Polish Airlines (LO)' },\n  { value: 'LH', label: 'Lufthansa (LH)' },\n  { value: 'WY', label: 'Oman Air (WY)' },\n  { value: 'SQ', label: 'Singapore Airlines (SQ)' },\n  { value: 'SA', label: 'South African Airways (SA)' },\n  { value: 'LX', label: 'Swiss International Air Lines (LX)' },\n  { value: 'TP', label: 'TAP Air Portugal (TP)' },\n  { value: 'TG', label: 'Thai Airways (TG)' },\n  { value: 'UA', label: 'United Airlines (UA)' }\n].sort((a, b) => a.label.localeCompare(b.label));\n\n// Helper function to calculate distance between two points using Haversine formula\nconst calculateDistance = (lat1, lon1, lat2, lon2) => {\n  const R = 6371; // Earth's radius in kilometers\n  const dLat = (lat2 - lat1) * Math.PI / 180;\n  const dLon = (lon2 - lon1) * Math.PI / 180;\n  const a = \n    Math.sin(dLat/2) * Math.sin(dLat/2) +\n    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * \n    Math.sin(dLon/2) * Math.sin(dLon/2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n  return R * c;\n};\n\n// Calculate total distance for a route\nconst calculateRouteDistance = (route) => {\n  let totalDistance = 0;\n  \n  for (let i = 0; i < route.length; i++) {\n    const segment = route[i];\n    const departureAirport = airports.find(a => a.IATA === segment.Departure_IATA);\n    const arrivalAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n    \n    if (departureAirport && arrivalAirport) {\n      const segmentDistance = calculateDistance(\n        departureAirport.Latitude,\n        departureAirport.Longitude,\n        arrivalAirport.Latitude,\n        arrivalAirport.Longitude\n      );\n      totalDistance += segmentDistance;\n    }\n  }\n  \n  return totalDistance;\n};\n\nexport function SearchPage() {\n  // State for selected airports and search results\n  const [departureAirport, setDepartureAirport] = useState('');\n  const [arrivalAirport, setArrivalAirport] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [showResults, setShowResults] = useState(false);\n  const [avoidCountries, setAvoidCountries] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [avoidAirlines, setAvoidAirlines] = useState([]);\n\n  // Get the country options when component mounts\n  const countryOptions = useMemo(() => {\n    return getUniqueCountries(airports);\n  }, []);\n\n  // Calculates direct distance between airports using Haversine formula\n  function calculateDirectDistance(origin, destination) {\n    const originAirport = airports.find(a => a.IATA === origin);\n    const destAirport = airports.find(a => a.IATA === destination);\n    \n    if (!originAirport || !destAirport) return null;\n\n    const R = 3959; // Earth's radius in miles\n    const lat1 = originAirport.Latitude * Math.PI / 180;\n    const lat2 = destAirport.Latitude * Math.PI / 180;\n    const dLat = (destAirport.Latitude - originAirport.Latitude) * Math.PI / 180;\n    const dLon = (destAirport.Longitude - originAirport.Longitude) * Math.PI / 180;\n\n    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n             Math.cos(lat1) * Math.cos(lat2) *\n             Math.sin(dLon/2) * Math.sin(dLon/2);\n    \n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    return R * c;\n  }\n\n  // ===============================\n  // Route Finding Core Logic\n  // ===============================\n\n  const findPossibleRoutes = (origin, destination, visited = new Set(), visitedCountries = new Set(), path = [], directDistance = null) => {\n    /**\n     * Helper: Counts how many times each country appears as a layover in the path\n     * Used to prevent multiple stops in transit countries\n     * @param {Array} currentPath - Current sequence of flight segments\n     * @returns {Object} - Dictionary of country codes to layover counts\n     */\n    const getLayoverCountByCountry = (currentPath) => {\n      const countByCountry = {};\n      currentPath.forEach(segment => {\n        const airport = airports.find(a => a.IATA === segment.Arrival_IATA);\n        if (airport) {\n          countByCountry[airport.Country] = (countByCountry[airport.Country] || 0) + 1;\n        }\n      });\n      return countByCountry;\n    };\n\n    // Create filtered allRoutes based on avoided airlines\n    const allRoutes = [\n      ...(avoidAirlines.includes('UA') ? [] : UA_miles),\n      ...(avoidAirlines.includes('SQ') ? [] : SQ_miles),\n      ...(avoidAirlines.includes('LH') ? [] : LH_miles),\n      ...(avoidAirlines.includes('LX') ? [] : LX_miles),\n      ...(avoidAirlines.includes('TG') ? [] : TG_miles),\n      ...(avoidAirlines.includes('BR') ? [] : BR_miles),\n      ...(avoidAirlines.includes('NH') ? [] : NH_miles),\n      ...(avoidAirlines.includes('OS') ? [] : OS_miles),\n      ...(avoidAirlines.includes('OZ') ? [] : OZ_miles),\n      ...(avoidAirlines.includes('NZ') ? [] : NZ_miles),\n      ...(avoidAirlines.includes('SA') ? [] : SA_miles),\n      ...(avoidAirlines.includes('AI') ? [] : AI_miles),\n      ...(avoidAirlines.includes('LO') ? [] : LO_miles),\n      ...(avoidAirlines.includes('SN') ? [] : SN_miles),\n      ...(avoidAirlines.includes('A3') ? [] : A3_miles),\n      ...(avoidAirlines.includes('TP') ? [] : TP_miles),\n      ...(avoidAirlines.includes('MS') ? [] : MS_miles),\n      ...(avoidAirlines.includes('WY') ? [] : WY_miles),\n      ...(avoidAirlines.includes('GF') ? [] : GF_miles),\n      ...(avoidAirlines.includes('AC') ? [] : AC_miles)\n    ];\n\n    const routes = [];\n\n    // Get origin and destination airport details for US/Canada check\n    const originAirport = airports.find(a => a.IATA === origin);\n    const destAirport = airports.find(a => a.IATA === destination);\n    const isOriginNorthAmerica = ['United States', 'Canada'].includes(originAirport?.Country);\n    const isDestNorthAmerica = ['United States', 'Canada'].includes(destAirport?.Country);\n    const bothInNorthAmerica = isOriginNorthAmerica && isDestNorthAmerica;\n\n    // Count existing US/Canada layovers in the current path\n    const northAmericaLayovers = path.reduce((count, segment) => {\n      const layoverAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n      return count + (['United States', 'Canada'].includes(layoverAirport?.Country) ? 1 : 0);\n    }, 0);\n\n    // Count existing European layovers in the current path\n    const europeanLayovers = path.reduce((count, segment) => {\n      const layoverAirport = airports.find(a => a.IATA === segment.Arrival_IATA);\n      return count + (EUROPEAN_COUNTRIES.has(layoverAirport?.Country) ? 1 : 0);\n    }, 0);\n\n    // Calculate direct distance if not provided\n    if (directDistance === null) {\n      directDistance = calculateDirectDistance(origin, destination);\n      if (!directDistance) return [];\n    }\n\n    // Base case: if we've found a path to the destination\n    if (path.length > 0 && path[path.length - 1].Arrival_IATA === destination) {\n      const totalDistance = path.reduce((sum, segment) => sum + segment.Distance, 0);\n      if (totalDistance <= directDistance * 2) {\n        return [path];\n      }\n      return [];\n    }\n\n    // Don't allow paths longer than 6 segments (5 stops)\n    if (path.length >= 4) {\n      return [];\n    }\n\n    // Get current point and its country\n    const currentPoint = path.length === 0 ? origin : path[path.length - 1].Arrival_IATA;\n    const currentAirport = airports.find(a => a.IATA === currentPoint);\n    \n    if (!currentAirport) return [];\n\n    const possibleSegments = allRoutes.filter(route => {\n      // Basic route validation - must connect from current point\n      if (route[\"Departure IATA\"] !== currentPoint) return false;\n\n      // Get airport details for origin, destination, and next possible stop\n      const originAirport = airports.find(a => a.IATA === origin);\n      const destAirport = airports.find(a => a.IATA === destination);\n      const arrivalAirport = airports.find(a => a.IATA === route[\"Arrival IATA\"]);\n      \n      if (!originAirport || !destAirport || !arrivalAirport) return false;\n\n      // Rule: Prevent multiple layovers in transit countries\n      // Exception: Allow multiple stops in origin/destination country\n      const layoverCounts = getLayoverCountByCountry(path);\n      const arrivalCountry = arrivalAirport.Country;\n      if (arrivalCountry !== originAirport.Country && \n          arrivalCountry !== destAirport.Country && \n          layoverCounts[arrivalCountry] >= 1) {\n        return false;\n      }\n\n      // Rule: Maximum 2 stops in North America for non-NA itineraries\n      const isArrivalNorthAmerica = ['United States', 'Canada'].includes(arrivalAirport.Country);\n      if (isArrivalNorthAmerica && !bothInNorthAmerica && northAmericaLayovers >= 2) {\n        return false;\n      }\n\n      // Rule: Maximum 2 stops in Europe\n      const isEuropeanArrival = EUROPEAN_COUNTRIES.has(arrivalAirport.Country);\n      if (isEuropeanArrival && europeanLayovers >= 2) {\n        return false;\n      }\n\n      // Rule: No revisiting airports (prevent loops)\n      if (visited.has(route[\"Arrival IATA\"])) return false;\n\n      // Rule: No backtracking to previously visited countries\n      // Exception: Allow same-country connections (e.g., FRA-MUC)\n      const isBacktrackingCountry = visitedCountries.has(arrivalAirport.Country) &&\n                                  arrivalAirport.Country !== currentAirport.Country;\n      if (isBacktrackingCountry) return false;\n\n      return true;\n    });\n\n    // Try each possible next segment\n    for (const segment of possibleSegments) {\n      const arrivalAirport = airports.find(a => a.IATA === segment[\"Arrival IATA\"]);\n      \n      // Calculate running total distance\n      const currentTotalDistance = path.reduce((sum, seg) => sum + seg.Distance, 0) + \n                               segment[\"Flight Distance (miles)\"];\n      \n      // Skip this path if it's already over 2x direct distance\n      if (currentTotalDistance > directDistance * 2) {\n        continue;\n      }\n\n      // Update visited sets\n      const newVisited = new Set(visited);\n      newVisited.add(segment[\"Arrival IATA\"]);\n      \n      const newVisitedCountries = new Set(visitedCountries);\n      newVisitedCountries.add(arrivalAirport.Country);\n\n      const newPath = [...path, {\n        Departure_IATA: segment[\"Departure IATA\"],\n        Arrival_IATA: segment[\"Arrival IATA\"],\n        Distance: segment[\"Flight Distance (miles)\"],\n        Country: arrivalAirport.Country // Add country info for reference\n      }];\n\n      const newRoutes = findPossibleRoutes(\n        origin,\n        destination,\n        newVisited,\n        newVisitedCountries,\n        newPath,\n        directDistance\n      );\n\n      routes.push(...newRoutes);\n    }\n\n    return routes;\n  };\n\n  // Handles the search button click\n  // Updates URL parameters and finds possible routes\n  const handleSearch = async () => {\n    // Show loading overlay immediately\n    setIsLoading(true);\n    setShowResults(false);\n\n    try {\n      // Wait for 250ms to ensure overlay is visible\n      await new Promise(resolve => setTimeout(resolve, 250));\n\n      if (departureAirport && arrivalAirport) {\n        const params = new URLSearchParams();\n        params.set('from', departureAirport);\n        params.set('to', arrivalAirport);\n        params.set('avoidCountries', avoidCountries.join(','));\n        \n        window.history.pushState(\n          {}, \n          '', \n          `${window.location.pathname}?${params.toString()}`\n        );\n        \n        const originAirport = airports.find(a => a.IATA === departureAirport);\n        const visited = new Set([departureAirport]);\n        const visitedCountries = new Set([originAirport.Country]);\n        \n        const routes = findPossibleRoutes(\n          departureAirport, \n          arrivalAirport, \n          visited,\n          visitedCountries\n        );\n        \n        // Filter out routes that go through avoided countries\n        const filteredRoutes = routes.filter(route => \n          isRouteAvoidingCountries(route, avoidCountries)\n        );\n        \n        // Sort routes by total distance\n        const sortedRoutes = filteredRoutes.sort((a, b) => {\n          const distanceA = calculateRouteDistance(a);\n          const distanceB = calculateRouteDistance(b);\n          return distanceA - distanceB; // Low to high\n        });\n        \n        setSearchResults(sortedRoutes);\n        setShowResults(true);\n      }\n    } catch (error) {\n      console.error('Error searching routes:', error);\n    } finally {\n      // Add a small delay before hiding loading screen for smoother transition\n      await new Promise(resolve => setTimeout(resolve, 100));\n      setIsLoading(false);\n    }\n  };\n\n  // Airport search with better IATA and name prioritization\n  const getAirportOptions = (inputValue) => {\n    if (!inputValue) return [];\n    \n    const input = inputValue.toLowerCase().trim();\n    \n    // Priority 1: Exact IATA match\n    const exactIataMatches = airports.filter(airport => \n      airport.IATA.toLowerCase() === input\n    );\n\n    // Priority 2: IATA starts with input\n    const startingIataMatches = airports.filter(airport => \n      airport.IATA.toLowerCase().startsWith(input) &&\n      !exactIataMatches.includes(airport)\n    );\n\n    // Priority 3: Airport name starts with input\n    const startingNameMatches = airports.filter(airport => \n      airport.Name.toLowerCase().startsWith(input) &&\n      !exactIataMatches.includes(airport) &&\n      !startingIataMatches.includes(airport)\n    );\n\n    // Priority 4: Airport name contains input\n    const containingNameMatches = airports.filter(airport => \n      airport.Name.toLowerCase().includes(input) &&\n      !exactIataMatches.includes(airport) &&\n      !startingIataMatches.includes(airport) &&\n      !startingNameMatches.includes(airport)\n    );\n\n    // Combine all matches with proper ordering\n    const allMatches = [\n      ...exactIataMatches,\n      ...startingIataMatches,\n      ...startingNameMatches,\n      ...containingNameMatches\n    ].slice(0, 5); // Limit to 5 results\n\n    return allMatches.map(airport => ({\n      value: airport.IATA,\n      label: `${airport.IATA} - ${airport.Name} (${airport.Country})`\n    }));\n  };\n\n  // Country search with progressive character matching\n  const getCountryOptions = (inputValue) => {\n    if (!inputValue) return [];\n\n    const input = inputValue.toLowerCase().trim();\n    const countries = getUniqueCountries(airports);\n    \n    // First: Exact matches\n    const exactMatches = countries.filter(country => \n      country.toLowerCase() === input\n    );\n\n    // Second: Starting matches (progressive matching)\n    const startingMatches = countries.filter(country => \n      country.toLowerCase().startsWith(input) &&\n      !exactMatches.includes(country)\n    );\n\n    // Third: Progressive character matching\n    const progressiveMatches = countries.filter(country => {\n      if (exactMatches.includes(country) || startingMatches.includes(country)) {\n        return false;\n      }\n      \n      const countryChars = country.toLowerCase();\n      let lastIndex = -1;\n      \n      // Check if characters appear in sequence\n      for (const char of input) {\n        const index = countryChars.indexOf(char, lastIndex + 1);\n        if (index === -1) return false;\n        lastIndex = index;\n      }\n      \n      return true;\n    });\n\n    // Combine all matches with proper ordering\n    const allMatches = [\n      ...exactMatches,\n      ...startingMatches,\n      ...progressiveMatches\n    ].slice(0, 5); // Limit to 5 results\n\n    return allMatches.map(country => ({\n      value: country,\n      label: country\n    }));\n  };\n\n  const filterCountries = (inputValue) => {\n    if (!inputValue) return [];\n    \n    const input = inputValue.toLowerCase().trim();\n    const countries = getUniqueCountries(airports);\n    \n    // Priority 1: Exact matches\n    const exactMatches = countries.filter(country => \n      country.toLowerCase() === input\n    );\n\n    // Priority 2: Starts with input\n    const startingMatches = countries.filter(country => \n      country.toLowerCase().startsWith(input) &&\n      !exactMatches.includes(country)\n    );\n\n    // Priority 3: Contains input\n    const containingMatches = countries.filter(country => \n      country.toLowerCase().includes(input) &&\n      !exactMatches.includes(country) &&\n      !startingMatches.includes(country)\n    );\n\n    return [...exactMatches, ...startingMatches, ...containingMatches]\n      .slice(0, 5)\n      .map(country => ({\n        value: country,\n        label: country\n      }));\n  };\n\n  const loadCountryOptions = (inputValue) => \n    new Promise((resolve) => {\n      resolve(filterCountries(inputValue));\n    });\n\n  const filterAirports = (inputValue) => {\n    if (!inputValue) return [];\n    \n    const input = inputValue.toLowerCase().trim();\n    \n    // Filter out airports from avoided countries first\n    const availableAirports = airports.filter(airport => \n      !avoidCountries.includes(airport.Country)\n    );\n    \n    // Priority 1: Exact IATA match\n    const exactIataMatches = availableAirports.filter(airport => \n      airport.IATA.toLowerCase() === input\n    );\n\n    // Priority 2: IATA starts with input\n    const startingIataMatches = availableAirports.filter(airport => \n      airport.IATA.toLowerCase().startsWith(input) &&\n      !exactIataMatches.includes(airport)\n    );\n\n    // Priority 3: Airport name starts with input\n    const startingNameMatches = availableAirports.filter(airport => \n      airport.Name.toLowerCase().startsWith(input) &&\n      !exactIataMatches.includes(airport) &&\n      !startingIataMatches.includes(airport)\n    );\n\n    // Priority 4: Airport name contains input\n    const containingNameMatches = availableAirports.filter(airport => \n      airport.Name.toLowerCase().includes(input) &&\n      !exactIataMatches.includes(airport) &&\n      !startingIataMatches.includes(airport) &&\n      !startingNameMatches.includes(airport)\n    );\n\n    // Combine all matches with proper ordering\n    const allMatches = [\n      ...exactIataMatches,\n      ...startingIataMatches,\n      ...startingNameMatches,\n      ...containingNameMatches\n    ].slice(0, 5); // Limit to 5 results\n\n    return allMatches.map(airport => ({\n      value: airport.IATA,\n      label: `${airport.IATA} - ${airport.Name} (${airport.Country})`\n    }));\n  };\n\n  const loadAirportOptions = (inputValue) => \n    new Promise((resolve) => {\n      resolve(filterAirports(inputValue));\n    });\n\n  // Filter airlines function\n  const filterAirlines = (inputValue) => {\n    if (!inputValue) return airlines;\n    \n    const input = inputValue.toLowerCase().trim();\n    \n    // Priority 1: Exact airline code match\n    const exactCodeMatches = airlines.filter(airline => \n      airline.value.toLowerCase() === input\n    );\n\n    // Priority 2: Starting airline code match\n    const startingCodeMatches = airlines.filter(airline => \n      airline.value.toLowerCase().startsWith(input) &&\n      !exactCodeMatches.includes(airline)\n    );\n\n    // Priority 3: Airline name contains input\n    const nameMatches = airlines.filter(airline => \n      airline.label.toLowerCase().includes(input) &&\n      !exactCodeMatches.includes(airline) &&\n      !startingCodeMatches.includes(airline)\n    );\n\n    return [...exactCodeMatches, ...startingCodeMatches, ...nameMatches];\n  };\n\n  const loadAirlineOptions = (inputValue) => \n    new Promise((resolve) => {\n      resolve(filterAirlines(inputValue));\n    });\n\n  // Also clear selected airports if their country is now avoided\n  useEffect(() => {\n    if (departureAirport) {\n      const departureCountry = airports.find(a => a.IATA === departureAirport)?.Country;\n      if (departureCountry && avoidCountries.includes(departureCountry)) {\n        setDepartureAirport('');\n      }\n    }\n    \n    if (arrivalAirport) {\n      const arrivalCountry = airports.find(a => a.IATA === arrivalAirport)?.Country;\n      if (arrivalCountry && avoidCountries.includes(arrivalCountry)) {\n        setArrivalAirport('');\n      }\n    }\n  }, [avoidCountries, departureAirport, arrivalAirport]);\n\n  return (\n    <div className=\"search-container\">\n      <div className=\"search-boxes\">\n        <div className=\"airport-search\">\n          <div className=\"search-parameter departure-parameter\">\n            <label style={{ fontWeight: 700 }}>Departure Airport:</label>\n            <AsyncSelect\n              className=\"select-input\"\n              cacheOptions\n              defaultOptions\n              value={departureAirport ? {\n                value: departureAirport,\n                label: airports.find(a => a.IATA === departureAirport)?.IATA + \n                  \" - \" + airports.find(a => a.IATA === departureAirport)?.Name +\n                  \" (\" + airports.find(a => a.IATA === departureAirport)?.Country + \")\"\n              } : null}\n              loadOptions={loadAirportOptions}\n              onChange={(selected) => setDepartureAirport(selected ? selected.value : '')}\n              isDisabled={isLoading}\n              placeholder=\"Type to search airports...\"\n            />\n          </div>\n          <div className=\"search-parameter arrival-parameter\">\n            <label style={{ fontWeight: 700 }}>Arrival Airport:</label>\n            <AsyncSelect\n              className=\"select-input\"\n              cacheOptions\n              defaultOptions\n              value={arrivalAirport ? {\n                value: arrivalAirport,\n                label: airports.find(a => a.IATA === arrivalAirport)?.IATA + \n                  \" - \" + airports.find(a => a.IATA === arrivalAirport)?.Name +\n                  \" (\" + airports.find(a => a.IATA === arrivalAirport)?.Country + \")\"\n              } : null}\n              loadOptions={loadAirportOptions}\n              onChange={(selected) => setArrivalAirport(selected ? selected.value : '')}\n              isDisabled={isLoading}\n              placeholder=\"Type to search airports...\"\n            />\n          </div>\n        </div>\n        <div className=\"search-parameter\">\n          <label>Avoid Countries:</label>\n          <AsyncSelect\n            isMulti\n            className=\"select-input avoid-countries-select\"\n            cacheOptions\n            defaultOptions\n            value={avoidCountries.map(country => ({\n              value: country,\n              label: country\n            }))}\n            loadOptions={loadCountryOptions}\n            onChange={(selected) => {\n              setAvoidCountries(selected ? selected.map(option => option.value) : []);\n            }}\n            isDisabled={isLoading}\n            placeholder=\"Type to search countries...\"\n          />\n        </div>\n        <div className=\"search-parameter\">\n          <label>Avoid Airlines:</label>\n          <AsyncSelect\n            isMulti\n            className=\"select-input avoid-airlines-select\"\n            cacheOptions\n            defaultOptions={airlines}\n            value={avoidAirlines.map(airline => ({\n              value: airline,\n              label: airlines.find(a => a.value === airline)?.label || airline\n            }))}\n            loadOptions={loadAirlineOptions}\n            onChange={(selected) => {\n              setAvoidAirlines(selected ? selected.map(option => option.value) : []);\n            }}\n            isDisabled={isLoading}\n            placeholder=\"Select airlines to avoid...\"\n          />\n        </div>\n        <button \n          className=\"search-button\"\n          onClick={handleSearch}\n          disabled={isLoading || !departureAirport || !arrivalAirport}\n        >\n          {isLoading ? 'Searching...' : 'Search'}\n        </button>\n      </div>\n      <FlightResults \n        results={searchResults} \n        isVisible={showResults}\n      />\n      \n      {isLoading && (\n        <div className=\"loading-overlay\">\n          <div className=\"loading-spinner\"></div>\n          <div className=\"loading-text\">Searching for routes...</div>\n        </div>\n      )}\n    </div>\n  );\n} \n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}